(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;a=window;b=a.WebSharper=a.WebSharper||{};c=b.UI=b.UI||{};d=c.Next=c.Next||{};e=d.Array=d.Array||{};f=d.String=d.String||{};g=d.Abbrev=d.Abbrev||{};h=g.Fresh=g.Fresh||{};i=g.HashSet=g.HashSet||{};j=g.Dict=g.Dict||{};k=g.Slot=g.Slot||{};l=g.Async=g.Async||{};m=g.Mailbox=g.Mailbox||{};n=m.MailboxState=m.MailboxState||{};o=a.StartupCode$WebSharper_UI_Next$Abbrev=a.StartupCode$WebSharper_UI_Next$Abbrev||{};p=d.AppendList=d.AppendList||{};q=a.StartupCode$WebSharper_UI_Next$AppendList=a.StartupCode$WebSharper_UI_Next$AppendList||{};r=d.DomUtility=d.DomUtility||{};s=a.StartupCode$WebSharper_UI_Next$DomUtility=a.StartupCode$WebSharper_UI_Next$DomUtility||{};t=d.Trie=d.Trie||{};u=t.LookupResult=t.LookupResult||{};v=a.StartupCode$WebSharper_UI_Next$Trie=a.StartupCode$WebSharper_UI_Next$Trie||{};w=d.Snap=d.Snap||{};x=d.Var=d.Var||{};y=d.View=d.View||{};z=d.ViewBuilder=d.ViewBuilder||{};A=d.Submitter=d.Submitter||{};B=d.Key=d.Key||{};C=d.Model=d.Model||{};D=d.Serializer=d.Serializer||{};E=d.Storage=d.Storage||{};F=E.ArrayStorage=E.ArrayStorage||{};G=E.LocalStorageBackend=E.LocalStorageBackend||{};H=d.ListModel=d.ListModel||{};I=d.ListModels=d.ListModels||{};J=a.StartupCode$WebSharper_UI_Next$Models=a.StartupCode$WebSharper_UI_Next$Models||{};K=d.ReactiveExtensions=d.ReactiveExtensions||{};L=d.DoubleInterpolation=d.DoubleInterpolation||{};M=d.Interpolation=d.Interpolation||{};N=d.Easing=d.Easing||{};O=d.Easings=d.Easings||{};P=d.An=d.An||{};Q=d.Anims=d.Anims||{};R=d.Trans=d.Trans||{};S=a.StartupCode$WebSharper_UI_Next$Animation=a.StartupCode$WebSharper_UI_Next$Animation||{};T=d.AnimatedAttrNode=d.AnimatedAttrNode||{};U=d.DynamicAttrNode=d.DynamicAttrNode||{};V=d.AttrProxy=d.AttrProxy||{};W=d.Client=d.Client||{};X=W.Attrs=W.Attrs||{};Y=X.Dyn=X.Dyn||{};Z=d.Attrs=d.Attrs||{};_0=d.CheckedInput=d.CheckedInput||{};_1=d.AttrModule=d.AttrModule||{};_2=a.StartupCode$WebSharper_UI_Next$Attr_Client=a.StartupCode$WebSharper_UI_Next$Attr_Client||{};_3=W.DocNode=W.DocNode||{};_4=d.DocElemNode=d.DocElemNode||{};_5=W.Docs=W.Docs||{};_6=_5.DomNodes=_5.DomNodes||{};_7=_5.NodeSet=_5.NodeSet||{};_8=_5.RunState=_5.RunState||{};_9=d.Docs=d.Docs||{};_=d.Doc=d.Doc||{};$=d.Elt=d.Elt||{};ba=W.EltUpdater=W.EltUpdater||{};bb=a.StartupCode$WebSharper_UI_Next$Doc_Client=a.StartupCode$WebSharper_UI_Next$Doc_Client||{};bc=d.Flow=d.Flow||{};bd=d.FlowBuilder=d.FlowBuilder||{};be=d.Html=d.Html||{};bf=be.attr=be.attr||{};bg=d.Route=d.Route||{};bh=d.Routing=d.Routing||{};bi=bh.State=bh.State||{};bj=d.RouteMap=d.RouteMap||{};bk=d.Router=d.Router||{};bl=d.Input=d.Input||{};bm=bl.MousePosSt=bl.MousePosSt||{};bn=bl.MouseBtnSt=bl.MouseBtnSt||{};bo=bl.Mouse=bl.Mouse||{};bp=bl.KeyListenerSt=bl.KeyListenerSt||{};bq=bl.Keyboard=bl.Keyboard||{};br=a.StartupCode$WebSharper_UI_Next$Input=a.StartupCode$WebSharper_UI_Next$Input||{};bs=b&&b.List;bt=b&&b.Arrays;bu=b&&b.Enumerator;bv=b&&b.Strings;bw=b&&b.Char;bx=b&&b.Collections;by=bx&&bx.HashSet;bz=b&&b.Seq;bA=a.IntelliFactory;bB=bA&&bA.Runtime;bC=b&&b.Unchecked;bD=b&&b.Concurrency;bE=bx&&bx.Map;bF=bx&&bx.FSharpMap;bG=bx&&bx.List;bH=b&&b.Operators;bI=b&&b.Ref;bJ=b&&b.Lazy;bK=bx&&bx.Dictionary;bL=b&&b.Int32;bM=b&&b.Slice;e.mapInPlace=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bO[bP]=bN(bO[bP]);return bO;};e.ofSeqNonCopying=function(bN){var bO,bP,bQ;if(bN instanceof a.Array)return bN;else if(bN instanceof bs.T)return bt.ofList(bN);else if(bN===null)return[];else{bO=[];bP=bu.Get(bN);try{while(bP.MoveNext()){bQ=bO.push(bP.Current());}return bO;}finally{if("Dispose"in bP)bP.Dispose();}}};e.MapTreeReduce=function(bN,bO,bP,bQ){var bR;function bS(bT,bU){var bV,bW;return bU<=0?bO:(bU===1?(bT>=0?bT<bR:false)?true:false:false)?bN(bt.get(bQ,bT)):(bW=bU/2>>0,bP(bS(bT,bW),bS(bT+bW,bU-bW)));}bR=bt.length(bQ);return bS(0,bR);};e.TreeReduce=function(bN,bO,bP){var bQ;function bR(bS,bT){var bU,bV;return bT<=0?bN:(bT===1?(bS>=0?bS<bQ:false)?true:false:false)?bt.get(bP,bS):(bV=bT/2>>0,bO(bR(bS,bV),bR(bS+bV,bT-bV)));}bQ=bt.length(bP);return bR(0,bQ);};f.isBlank=function(bN){return bv.forall(bw.IsWhiteSpace,bN);};h.Id=function(){h.set_counter(h.counter()+1);return"uid"+a.String(h.counter());};h.Int=function(){h.set_counter(h.counter()+1);return h.counter();};h.counter=function(){o.$cctor();return o.counter;};h.set_counter=function(bN){o.$cctor();o.counter=bN;};i.Filter=function(bN,bO){var bP;return new by.New$2((bP=i.ToArray(bO),bt.filter(bN,bP)));};i.Intersect=function(bN,bO){var bP;bP=new by.New$2(i.ToArray(bN));bP.IntersectWith(i.ToArray(bO));return bP;};i.Except=function(bN,bO){var bP;bP=new by.New$2(i.ToArray(bO));bP.ExceptWith(i.ToArray(bN));return bP;};i.ToArray=function(bN){var bO;bO=bt.create(bN.get_Count(),void 0);bN.CopyTo(bO);return bO;};j.ToValueArray=function(bN){var bO,bP;bO=bt.create(bN.count,void 0);bP=function(bQ,bR){return bt.set(bO,bQ,bR.V);};(function(bQ){bz.iteri(bP,bQ);}(bN));return bO;};j.ToKeyArray=function(bN){var bO,bP;bO=bt.create(bN.count,void 0);bP=function(bQ,bR){return bt.set(bO,bQ,bR.K);};(function(bQ){bz.iteri(bP,bQ);}(bN));return bO;};k=g.Slot=bB.Class({GetHashCode:function(){return bC.Hash(this.key(this.value));},Equals:function(bN){return bC.Equals(this.key(this.value),this.key(bN.get_Value()));},get_Value:function(){return this.value;}},null,k);k.New=bB.Ctor(function(bN,bO){this.key=bN;this.value=bO;},k);k.Create=function(bN,bO){return new k.New(bN,bO);};l.OnError=function(bN){return a.console.log("WebSharper UI.Next: Uncaught asynchronous exception",bN);};l.Schedule=function(bN){bD.Start(bD.Delay(function(){bN();return bD.Return(null);}),null);};l.StartTo=function(bN,bO){bD.StartWithContinuations(bN,bO,function(bP){l.OnError(bP);},function(bP){},null);};n=m.MailboxState=bB.Class({},null,n);m.StartProcessor=function(bN){var bO;function bP(){return bD.Delay(function(){return bD.Bind(bN,function(){var bQ,bR;bQ=bO[0];return bC.Equals(bQ,1)?(bO[0]=0,bD.Return(null)):bC.Equals(bQ,2)?(bO[0]=1,bR=bP(),bD.Bind(bR,function(){return bD.Return(null);})):bD.Return(null);});});}bO=[0];return function(){var bQ,bR;bQ=bO[0];bC.Equals(bQ,0)?(bO[0]=1,bR=bP(),bD.Start(bR,null)):bC.Equals(bQ,1)?bO[0]=2:void 0;};};o.$cctor=bB.Cctor(function(){o.counter=0;o.$cctor=a.ignore;});p.FromArray=function(bN){var bO;bO=bN.length;return bO===0?{$:0}:bO===1?{$:1,$0:bt.get(bN,0)}:{$:3,$0:bN.slice()};};p.ToArray=function(bN){var bO;function bP(bQ){var bR,bS;if(bQ.$==1)bO.push(bQ.$0);else if(bQ.$==2){bR=bQ.$1;bP(bQ.$0);bP(bR);}else if(bQ.$==3){bS=bQ.$0;bt.iter(function(bT){bO.push(bT);},bS);}}bO=[];bP(bN);return bO.slice(0);};p.Single=function(bN){return{$:1,$0:bN};};p.Concat=function(bN){var bO,bP;bO=e.ofSeqNonCopying(bN);bP=p.Empty();return e.TreeReduce(bP,p.Append,bO);};p.Append=function(bN,bO){return bN.$==0?bO:bO.$==0?bN:{$:2,$0:bN,$1:bO};};p.Empty=function(){q.$cctor();return q.Empty;};q.$cctor=bB.Cctor(function(){q.Empty={$:0};q.$cctor=a.ignore;});r.SetProperty=function(bN,bO,bP){return bN.setProperty(bO,bP);};r.IterSelector=function(bN,bO,bP){var bQ,bR,bS;bQ=bN.querySelectorAll(bO);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)bP(bQ[bR]);};r.ChildrenArray=function(bN){var bO,bP,bQ,bR;bO=[];for(bP=0,bQ=bN.childNodes.length-1;bP<=bQ;bP++){bR=bO.push(bN.childNodes[bP]);}return bO;};r.RemoveClass=function(bN,bO){var bP;bP=a.jQuery(bN).removeClass(bO);};r.AddClass=function(bN,bO){var bP;bP=a.jQuery(bN).addClass(bO);};r.InsertAt=function(bN,bO,bP){var bQ,bR;!(bP.parentNode===bN?bO===(bQ=bP.nextSibling,bC.Equals(bQ,null)?null:bQ):false)?bR=bN.insertBefore(bP,bO):void 0;};r.RemoveNode=function(bN,bO){var bP;if(bO.parentNode===bN){bP=bN.removeChild(bO);}};r.SetStyle=function(bN,bO,bP){r.SetProperty(bN.style,bO,bP);};r.SetAttr=function(bN,bO,bP){bN.setAttribute(bO,bP);};r.RemoveAttr=function(bN,bO){bN.removeAttribute(bO);};r.CreateAttr=function(bN,bO){var bP;bP=r.Doc().createAttribute(bN);bP.value=bO;return bP;};r.CreateText=function(bN){return r.Doc().createTextNode(bN);};r.CreateSvgElement=function(bN){return r.Doc().createElementNS("http://www.w3.org/2000/svg",bN);};r.CreateElement=function(bN){return r.Doc().createElement(bN);};r.Clear=function(bN){var bO;while(bN.hasChildNodes()){bO=bN.removeChild(bN.firstChild);}};r.ClearAttrs=function(bN){var bO;while(bN.hasAttributes()){bO=bN.removeAttributeNode(bN.attributes.item(0));}};r.AppendTo=function(bN,bO){var bP;bP=bN.appendChild(bO);};r.Doc=function(){s.$cctor();return s.Doc;};s.$cctor=bB.Cctor(function(){s.Doc=a.document;s.$cctor=a.ignore;});u.NotFound={$:1};t.Empty=function(){v.$cctor();return v.Empty;};t.Lookup=function(bN,bO){return t.Look(bs.ofSeq(bO),bN);};t.Look=function(bN,bO){var bP,bQ,bR,bS,bT,bU;switch(bO.$==2?(bP=bO.$0,0):bO.$==0?bN.$==1?(bP=[bN.$0,bN.$1,bO.$0],1):2:2){case 0:return{$:0,$0:bP,$1:bN};break;case 1:bQ=bP[0];bR=bP[1];bS=bP[2];bT=bE.TryFind(bQ,bS);return bT==null?u.NotFound:(bU=bT.$0,t.Look(bR,bU));break;case 2:return u.NotFound;break;}};t.ToArray=function(bN){var bO,bP;bO=[];bP=t.Map(function(){return function(bQ){return bO.push(bQ);};},bN);return bO.slice(0);};t.Mapi=function(bN,bO){var bP,bQ;bP=[0];bQ=function(){var bR;bR=bP[0];bP[0]=bR+1;return bR;};return t.Map(function(bR){return bN(bQ(),bR);},bO);};t.Map=function(bN,bO){return t.MapLoop(bs.T.Empty,bN,bO);};t.MapLoop=function(bN,bO,bP){var bQ,bR,bS;return bP.$==1?{$:1}:bP.$==2?(bQ=bP.$0,{$:2,$0:(bO(bN))(bQ)}):(bR=bP.$0,t.TrieBranch((bS=function(bT,bU){return t.MapLoop(bs.append(bN,bs.ofArray([bT])),bO,bU);},function(bT){return bE.Map(bS,bT);}(bR))));};t.Merge=function(bN){var bO,bP,bQ,bR,bS,bT;bO=e.ofSeqNonCopying(bN);bP=bt.length(bO);return bP===0?{$:1,$0:{$:1}}:bP===1?{$:1,$0:bt.get(bO,0)}:bt.exists(t.IsLeaf,bO)?null:(bQ=(bR=(bS=function(bU){return bU.$==0?{$:1,$0:bU.$0}:null;},function(bU){return bz.choose(bS,bU);}(bO)),t.MergeMaps(t.Merge,bR)),bQ==null?null:(bT=bQ.$0,{$:1,$0:t.TrieBranch(bT)}));};t.IsLeaf=function(bN){return bN.$==2?true:false;};t.MergeMaps=function(bN,bO){var bP,bQ,bR,bS;bP=function(bT){return bE.OfArray(bt.ofSeq(bT));};return function(bT){return bT==null?null:{$:1,$0:bP(bT.$0)};}(t.AllSome((bQ=function(bT,bU){var bV;bV=function(bW){return[bT,bW];};return function(bW){return bW==null?null:{$:1,$0:bV(bW.$0)};}(bN(bU));},function(bT){return bz.map(function(bU){return bQ(bU[0],bU[1]);},bT);}(bE.ToSeq((bR=bz.collect(bE.ToSeq,bO),(bS=new bF.New([]),bz.fold(function(bT,bU){var bV,bW;bV=bU[0];bW=bU[1];return t.MultiAdd(bV,bW,bT);},bS,bR))))))));};t.AllSome=function(bN){var bO,bP,bQ,bR;bP=bu.Get(bN);bQ=new bG.New$2();bO=true;while(bO?bP.MoveNext():false){bR=bP.Current();(bR!=null?bR.$==1:false)?bQ.Add(bR.$0):bO=false;}return bO?{$:1,$0:bQ.ToArray()}:null;};t.MultiAdd=function(bN,bO,bP){return bP.Add(bN,new bs.T({$:1,$0:bO,$1:t.MultiFind(bN,bP)}));};t.MultiFind=function(bN,bO){return bH.DefaultArg(bE.TryFind(bN,bO),bs.T.Empty);};t.Prefix=function(bN,bO){return t.TrieBranch(new bF.New(bs.ofArray([[bN,bO]])));};t.Leaf=function(bN){return{$:2,$0:bN};};t.TrieBranch=function(bN){return bN.get_IsEmpty()?{$:1}:{$:0,$0:bN};};v.$cctor=bB.Cctor(function(){v.Empty={$:1};v.$cctor=a.ignore;});w.MapAsync=function(bN,bO){var bP;bP=w.Create();w.When(bO,function(bQ){l.StartTo(bN(bQ),function(bR){w.MarkDone(bP,bO,bR);});},w.Obs(bP));return bP;};w.SnapshotOn=function(bN,bO){var bP,bQ;function bR(bS){var bT,bU,bV,bW,bX;if(!w.IsDone(bP)){bT=w.ValueAndForever(bN);bU=w.ValueAndForever(bO);(bT!=null?bT.$==1:false)?(bU!=null?bU.$==1:false)?(bV=bT.$0[1],bW=bU.$0[1],bX=bU.$0[0],(bV?true:bW)?w.MarkForever(bP,bX):w.MarkReady(bP,bX)):void 0:void 0;}}bP=w.Create();bQ=w.Obs(bP);w.When(bN,bR,bQ);w.When(bO,bR,function(){});return bP;};w.Map3=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7;function b8(b9){var b_,b$,ca,cb,cc,cd,ce,cf,cg;if(!w.IsDone(b6)){b_=w.ValueAndForever(bO);b$=w.ValueAndForever(bP);ca=w.ValueAndForever(bQ);(b_!=null?b_.$==1:false)?(b$!=null?b$.$==1:false)?(ca!=null?ca.$==1:false)?(cb=b_.$0[1],cc=b$.$0[1],cd=ca.$0[1],ce=b_.$0[0],cf=b$.$0[0],cg=ca.$0[0],((cb?cc:false)?cd:false)?w.MarkForever(b6,bN(ce,cf,cg)):w.MarkReady(b6,bN(ce,cf,cg))):void 0:void 0:void 0;}}bR=bO.s;bS=bP.s;bT=bQ.s;return bR.$==0?bS.$==0?bT.$==0?(bU=bR.$0,(bV=bS.$0,(bW=bT.$0,w.CreateForever(bN(bU,bV,bW))))):(bX=bR.$0,(bY=bS.$0,w.Map(function(b9){return bN(bX,bY,b9);},bQ))):bT.$==0?(bZ=bR.$0,(b0=bT.$0,w.Map(function(b9){return bN(bZ,b9,b0);},bP))):(b1=bR.$0,w.Map2(function(b9,b_){return bN(b1,b9,b_);},bP,bQ)):bS.$==0?bT.$==0?(b2=bS.$0,(b3=bT.$0,w.Map(function(b9){return bN(b9,b2,b3);},bO))):(b4=bS.$0,w.Map2(function(b9,b_){return bN(b9,b4,b_);},bO,bQ)):bT.$==0?(b5=bT.$0,w.Map2(function(b9,b_){return bN(b9,b_,b5);},bO,bP)):(b6=w.Create(),(b7=w.Obs(b6),(w.When(bO,b8,b7),w.When(bP,b8,b7),w.When(bQ,b8,b7),b6)));};w.Map2Unit=function(bN,bO){var bP,bQ,bR,bS;function bT(){var bU,bV,bW,bX;if(!w.IsDone(bR)){bU=w.ValueAndForever(bN);bV=w.ValueAndForever(bO);(bU!=null?bU.$==1:false)?(bV!=null?bV.$==1:false)?(bW=bU.$0[1],bX=bV.$0[1],(bW?bX:false)?w.MarkForever(bR,null):w.MarkReady(bR,null)):void 0:void 0;}}bP=bN.s;bQ=bO.s;return bP.$==0?bQ.$==0?w.CreateForever():bO:bQ.$==0?bN:(bR=w.Create(),(bS=w.Obs(bR),(w.When(bN,bT,bS),w.When(bO,bT,bS),bR)));};w.Map2=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX;function bY(bZ){var b0,b1,b2,b3,b4,b5;if(!w.IsDone(bW)){b0=w.ValueAndForever(bO);b1=w.ValueAndForever(bP);(b0!=null?b0.$==1:false)?(b1!=null?b1.$==1:false)?(b2=b0.$0[1],b3=b1.$0[1],b4=b0.$0[0],b5=b1.$0[0],(b2?b3:false)?w.MarkForever(bW,bN(b4,b5)):w.MarkReady(bW,bN(b4,b5))):void 0:void 0;}}bQ=bO.s;bR=bP.s;return bQ.$==0?bR.$==0?(bS=bQ.$0,(bT=bR.$0,w.CreateForever(bN(bS,bT)))):(bU=bQ.$0,w.Map(function(bZ){return bN(bU,bZ);},bP)):bR.$==0?(bV=bR.$0,w.Map(function(bZ){return bN(bZ,bV);},bO)):(bW=w.Create(),(bX=w.Obs(bW),(w.When(bO,bY,bX),w.When(bP,bY,bX),bW)));};w.MapCachedBy=function(bN,bO,bP,bQ){return w.Map(function(bR){var bS,bT,bU;bS=bO[0];return((bS!=null?bS.$==1:false)?bN(bR,bS.$0[0])?(bT=[bS.$0[0],bS.$0[1]],true):false:false)?bT[1]:(bU=bP(bR),(bO[0]={$:1,$0:[bR,bU]},bU));},bQ);};w.Map=function(bN,bO){var bP,bQ,bR,bS;bP=bO.s;return bP.$==0?(bQ=bP.$0,w.CreateForever(bN(bQ))):(bR=w.Create(),(w.When(bO,(bS=function(bT){w.MarkDone(bR,bO,bT);},function(bT){return bS(bN(bT));}),w.Obs(bR)),bR));};w.Sequence=function(bN){var bO,bP,bQ,bR,bS,bT;bO=bt.ofSeq(bN);return bO.length==0?w.CreateForever([]):(bP=w.Create(),(bQ=[bt.length(bO)-1],(bR=w.Obs(bP),(bS=function(){var bU,bV;if(bQ[0]===0){bU=(bV=function(bW){var bX;bX=bW.s;return bX.$==0?bX.$0:bX.$==2?bX.$0:bH.FailWith("value not found by View.Sequence");},function(bW){return bt.map(bV,bW);}(bO));bt.forall(w.IsForever,bO)?w.MarkForever(bP,bU):w.MarkReady(bP,bU);}else bI.decr(bQ);},(bT=function(bU){w.When(bU,bS,bR);},function(bU){bt.iter(bT,bU);}(bO),bP)))));};w.CreateForeverAsync=function(bN){var bO;bO=w.Make({$:3,$0:[],$1:[]});l.StartTo(bN,function(bP){w.MarkForever(bO,bP);});return bO;};w.JoinInner=function(bN){var bO,bP;bO=w.Create();bP=w.Obs(bO);w.When(bN,function(bQ){var bR;bR=bQ();w.When(bR,function(bS){if(w.IsForever(bR)?w.IsForever(bN):false)w.MarkForever(bO,bS);else w.MarkReady(bO,bS);},bP);w.WhenObsolete(bN,w.Obs(bR));},bP);return bO;};w.Join=function(bN){var bO,bP;bO=w.Create();bP=w.Obs(bO);w.When(bN,function(bQ){var bR;bR=bQ();w.When(bR,function(bS){if(w.IsForever(bR)?w.IsForever(bN):false)w.MarkForever(bO,bS);else w.MarkReady(bO,bS);},bP);},bP);return bO;};w.ValueAndForever=function(bN){var bO;bO=bN.s;return bO.$==0?{$:1,$0:[bO.$0,true]}:bO.$==2?{$:1,$0:[bO.$0,false]}:null;};w.WhenObsolete=function(bN,bO){var bP;bP=bN.s;bP.$==1?bO():bP.$==2?bP.$1.push(bO):bP.$==3?bP.$1.push(bO):void 0;};w.When=function(bN,bO,bP){var bQ,bR,bS;bQ=bN.s;bQ.$==1?bP():bQ.$==2?(bR=bQ.$0,bQ.$1.push(bP),bO(bR)):bQ.$==3?(bS=bQ.$1,bQ.$0.push(bO),bS.push(bP)):bO(bQ.$0);};w.MarkDone=function(bN,bO,bP){if(w.IsForever(bO))w.MarkForever(bN,bP);else w.MarkReady(bN,bP);};w.MarkReady=function(bN,bO){var bP,bQ,bR;bP=bN.s;bP.$==3?(bQ=bP.$1,bR=bP.$0,bN.s={$:2,$0:bO,$1:bQ},bz.iter(function(bS){bS(bO);},bR)):void 0;};w.Obs=function(bN){return function(){w.MarkObsolete(bN);};};w.MarkObsolete=function(bN){var bO,bP;bO=bN.s;(bO.$==1?true:bO.$==2?(bP=bO.$1,false):bO.$==3?(bP=bO.$1,false):true)?void 0:(bN.s={$:1},bz.iter(function(bQ){bQ();},bP));};w.MarkForever=function(bN,bO){var bP,bQ;bP=bN.s;bP.$==3?(bQ=bP.$0,bN.s={$:0,$0:bO},bz.iter(function(bR){bR(bO);},bQ)):void 0;};w.IsDone=function(bN){var bO;bO=bN.s;return bO.$==0?true:bO.$==2?true:false;};w.IsObsolete=function(bN){return bN.s.$==1?true:false;};w.IsForever=function(bN){return bN.s.$==0?true:false;};w.CreateWithValue=function(bN){return w.Make({$:2,$0:bN,$1:[]});};w.CreateForever=function(bN){return w.Make({$:0,$0:bN});};w.Create=function(){return w.Make({$:3,$0:[],$1:[]});};w.Make=function(bN){return{s:bN};};x=d.Var=bB.Class({RId:function(){return"uinref"+a.String(this.i);},RView:function(){return this.v;},RUpdM:function(bN){var bO,bP;bO=bN(this.c);(bO!=null?bO.$==1:false)?(bP=bO.$0,x.Set(this,bP)):void 0;},RUpd:function(bN){x.Update(this,bN);},set_RVal:function(bN){x.Set(this,bN);},RVal:function(){return this.c;},RSet:function(bN){x.Set(this,bN);},RGet:function(){return this.c;}},null,x);x.New=function(bN,bO,bP,bQ,bR){return new x({o:bN,c:bO,s:bP,i:bQ,v:bR});};x.Lens=function(bN,bO,bP){var bQ,bR,bS;bQ=h.Id();bR=(bS=bN.RView(),y.Map(bO,bS));return{RId:function(){return bQ;},RView:function(){return bR;},RUpdM:function(bT){return bN.RUpdM(function(bU){var bV;bV=bT(bO(bU));return bV==null?null:{$:1,$0:bP(bU,bV.$0)};});},RUpd:function(bT){return bN.RUpd(function(bU){return bP(bU,bT(bO(bU)));});},set_RVal:function(bT){return bN.RUpd(function(bU){return bP(bU,bT);});},RVal:function(){return bO(bN.RGet());},RSet:function(bT){return bN.RUpd(function(bU){return bP(bU,bT);});},RGet:function(){return bO(bN.RGet());}};};x.Update=function(bN,bO){var bP;bP=bO(bN.c);x.Set(bN,bP);};x.SetFinal=function(bN,bO){if(bN.o)(function(bP){return bP("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(bP){a.console.log(bP);}));else{w.MarkObsolete(bN.s);bN.o=true;bN.c=bO;bN.s=w.CreateForever(bO);}};x.Set=function(bN,bO){if(bN.o)(function(bP){return bP("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(bP){a.console.log(bP);}));else{w.MarkObsolete(bN.s);bN.c=bO;bN.s=w.CreateWithValue(bO);}};x.Create=function(){var bN;bN=null;bN=x.New(false,null,w.CreateWithValue(),h.Int(),function(){return bN.s;});return bN;};x.Create$1=function(bN){var bO;bO=null;bO=x.New(false,bN,w.CreateWithValue(bN),h.Int(),function(){return bO.s;});return bO;};y.get_Do=function(){return z.B;};y.Apply=function(bN,bO){return y.Map2(function(bP,bQ){return bP(bQ);},bN,bO);};y.AsyncAwait=function(bN,bO){var bP;bP=function(bQ){var bR,bS;function bT(){return y.RemovableSink(function(bU){if(bN(bU)){(bJ.Force(bR))();bQ(bU);}},bO);}bR=bJ.Create(bT);bS=bJ.Force(bR);};return bD.FromContinuations(function(bQ,bR,bS){return bP.apply(null,[bQ,bR,bS]);});};y.RemovableSink=function(bN,bO){var bP;function bQ(){var bR;bR=bO();w.When(bR,function(bS){if(bP[0])bN(bS);},function(){if(bP[0])l.Schedule(bQ);});}bP=[true];l.Schedule(bQ);return function(){bP[0]=false;};};y.Sink=function(bN,bO){function bP(){var bQ;bQ=bO();w.When(bQ,bN,function(){l.Schedule(bP);});}l.Schedule(bP);};y.TryFinally=function(bN,bO){return y.CreateLazy(function(){try{return bO();}finally{bN();}});};y.TryWith=function(bN,bO){return y.CreateLazy(function(){try{return bO();}catch(bP){return(bN(bP))();}});};y.ConstAsync=function(bN){var bO;bO=w.CreateForeverAsync(bN);return function(){return bO;};};y.Const=function(bN){var bO;bO=w.CreateForever(bN);return function(){return bO;};};y.Sequence=function(bN){return y.CreateLazy(function(){var bO;return w.Sequence((bO=function(bP){return bP();},function(bP){return bz.map(bO,bP);}(bN)));});};y.UpdateWhile=function(bN,bO,bP){var bQ;bQ=[bN];return y.BindInner(function(bR){return bR?y.Map(function(bS){bQ[0]=bS;return bS;},bP):y.Const(bQ[0]);},bO);};y.BindInner=function(bN,bO){return y.JoinInner(y.Map(bN,bO));};y.JoinInner=function(bN){return y.CreateLazy(function(){return w.JoinInner(bN());});};y.Bind=function(bN,bO){return y.Join(y.Map(bN,bO));};y.Join=function(bN){return y.CreateLazy(function(){return w.Join(bN());});};y.MapSeqCachedView=function(bN,bO){var bP;bP=function(){return bN;};return y.MapSeqCachedViewBy(a.id,function(bQ,bR){return(bP(bQ))(bR);},bO);};y.MapSeqCachedViewBy=function(bN,bO,bP){var bQ,bR;bQ=[new bK.New$5()];bR=function(bS){var bT,bU,bV,bW;bT=bQ[0];bU=new bK.New$5();bV=(bW=function(bX){var bY,bZ,b0,b1;bY=bN(bX);bZ=bT.ContainsKey(bY)?(b0=bT.get_Item(bY),(b1=b0.r,x.Set(b1,bX),b0)):y.ConvertSeqNode(function(b2){return bO(bY,b2);},bX);bU.set_Item(bY,bZ);return bZ.e;},function(bX){return e.mapInPlace(bW,bX);}(bt.ofSeq(bS)));bQ[0]=bU;return bV;};return function(bS){return y.Map(bR,bS);}(bP);};y.ConvertSeqNode=function(bN,bO){var bP,bQ;bP=x.Create$1(bO);bQ=bP.v;return{e:bN(bQ),r:bP,w:bQ};};y.MapSeqCached=function(bN,bO){return y.MapSeqCachedBy(a.id,bN,bO);};y.MapSeqCachedBy=function(bN,bO,bP){var bQ,bR;bQ=[new bK.New$5()];bR=function(bS){var bT,bU,bV,bW;bT=bQ[0];bU=new bK.New$5();bV=(bW=function(bX){var bY,bZ;bY=bN(bX);bZ=bT.ContainsKey(bY)?bT.get_Item(bY):bO(bX);bU.set_Item(bY,bZ);return bZ;},function(bX){return e.mapInPlace(bW,bX);}(bt.ofSeq(bS)));bQ[0]=bU;return bV;};return function(bS){return y.Map(bR,bS);}(bP);};y.SnapshotOn=function(bN,bO,bP){var bQ;bQ=w.CreateWithValue(bN);return y.CreateLazy(function(){var bR,bS;bR=bO();return w.IsObsolete(bQ)?(bS=bP(),w.SnapshotOn(bR,bS)):(w.WhenObsolete(bR,w.Obs(bQ)),bQ);});};y.GetAsync=function(bN){return bD.FromContinuations(function(bO){return y.Get(bO,bN);});};y.Get=function(bN,bO){var bP;function bQ(){w.When(bO(),function(bR){if(!bP[0]){bP[0]=true;bN(bR);}},function(){if(!bP[0])bQ();});}bP=[false];bQ();};y.MapAsync2=function(bN,bO,bP){var bQ;bQ=a.id;return function(bR){return y.MapAsync(bQ,bR);}(y.Map2(bN,bO,bP));};y.MapAsync=function(bN,bO){return y.CreateLazy(function(){var bP;bP=bO();return w.MapAsync(bN,bP);});};y.Map3=function(bN,bO,bP,bQ){return y.CreateLazy(function(){var bR,bS,bT;bR=bO();bS=bP();bT=bQ();return w.Map3(bN,bR,bS,bT);});};y.Map2Unit=function(bN,bO){return y.CreateLazy(function(){var bP,bQ;bP=bN();bQ=bO();return w.Map2Unit(bP,bQ);});};y.Map2=function(bN,bO,bP){return y.CreateLazy(function(){var bQ,bR;bQ=bO();bR=bP();return w.Map2(bN,bQ,bR);});};y.MapCached=function(bN,bO){return y.MapCachedBy(bC.Equals,bN,bO);};y.MapCachedBy=function(bN,bO,bP){var bQ;bQ=[null];return y.CreateLazy(function(){var bR;bR=bP();return w.MapCachedBy(bN,bQ,bO,bR);});};y.Map=function(bN,bO){return y.CreateLazy(function(){var bP;bP=bO();return w.Map(bN,bP);});};y.CreateLazy=function(bN){var bO;bO={c:null,o:bN};return function(){var bP;bP=bO.c;return bP===null?(bP=bO.o(),bO.c=bP,w.IsForever(bP)?bO.o=null:w.WhenObsolete(bP,function(){bO.c=null;}),bP):bP;};};z.B={$:0};A=d.Submitter=bB.Class({Trigger:function(){var bN;bN=this["var"];x.Set(bN,null);}},null,A);A.New=bB.Ctor(function(bN,bO){var bP,bQ;this.input=bN;this["var"]=x.Create();this.view=(bP=this["var"].v,(bQ=this.input,y.SnapshotOn(bO,bP,bQ)));},A);A.CreateOption=function(bN){return new A.New(y.Map(function(bO){return{$:1,$0:bO};},bN),null);};B.Fresh=function(){return{$:0,$0:h.Int()};};C=d.Model=bB.Class({},null,C);C.New=bB.Ctor(function(bN,bO){var bP,bQ,bR;bP=x.Create$1(bO);bQ=(bR=bP.v,y.Map(bN,bR));C.New$1.call(this,bP,bQ);},C);C.New$1=bB.Ctor(function(bN,bO){this["var"]=bN;this.view=bO;},C);C.Update=function(bN,bO){var bP;bP=bO["var"];x.Update(bP,function(bQ){bN(bQ);return bQ;});};C.Create=function(bN,bO){return new C.New(bN,bO);};D.Default=function(){J.$cctor();return J.Default;};F=E.ArrayStorage=bB.Class({SSet:function(bN){return bt.ofSeq(bN);},SSetAt:function(bN,bO,bP){bt.set(bP,bN,bO);return bP;},SRemoveIf:function(bN,bO){var bP;return bt.filter((bP=function(bQ){return!bQ;},function(bQ){return bP(bN(bQ));}),bO);},SInit:function(){return this.init;},SPrependMany:function(bN,bO){var bP;bP=bO.unshift.apply(bO,e.ofSeqNonCopying(bN));return bO;},SPrepend:function(bN,bO){var bP;bP=bO.unshift(bN);return bO;},SAppendMany:function(bN,bO){var bP;bP=bO.push.apply(bO,e.ofSeqNonCopying(bN));return bO;},SAppend:function(bN,bO){var bP;bP=bO.push(bN);return bO;}},null,F);F.New=bB.Ctor(function(bN){this.init=bN;},F);G=E.LocalStorageBackend=bB.Class({clear:function(){this.storage.removeItem(this.id);},set:function(bN){var bO,bP;this.storage.setItem(this.id,(bO=(bP=this.serializer.Encode,function(bQ){return bt.map(bP,bQ);}(bN)),a.JSON.stringify(bO)));return bN;},SSet:function(bN){return this.set(bt.ofSeq(bN));},SSetAt:function(bN,bO,bP){bt.set(bP,bN,bO);return this.set(bP);},SRemoveIf:function(bN,bO){var bP;return this.set(bt.filter((bP=function(bQ){return!bQ;},function(bQ){return bP(bN(bQ));}),bO));},SInit:function(){var bN,bO,bP;bN=this.storage.getItem(this.id);if(bN===null)return[];else try{bO=a.JSON.parse(bN);bP=this.serializer.Decode;return function(bQ){return bt.map(bP,bQ);}(bO);}catch(bQ){return[];}},SPrependMany:function(bN,bO){var bP;bP=bO.unshift.apply(bO,e.ofSeqNonCopying(bN));return this.set(bO);},SPrepend:function(bN,bO){var bP;bP=bO.unshift(bN);return this.set(bO);},SAppendMany:function(bN,bO){var bP;bP=bO.push.apply(bO,e.ofSeqNonCopying(bN));return this.set(bO);},SAppend:function(bN,bO){var bP;bP=bO.push(bN);return this.set(bO);}},null,G);G.New=bB.Ctor(function(bN,bO){this.id=bN;this.serializer=bO;this.storage=a.window.localStorage;},G);E.LocalStorage=function(bN,bO){return new G.New(bN,bO);};E.InMemory=function(bN){return new F.New(bN);};H=d.ListModel=bB.Class({Wrap:function(bN,bO,bP){var bQ;bQ=function(bR,bS){return bP(bR,bS);};return H.Wrap(this,bN,bO,function(bR,bS){return bQ(bR,bS);});},Lens:function(bN){var bO;bO=function(bP,bQ){return bQ;};return this.LensInto(a.id,function(bP,bQ){return bO(bP,bQ);},bN);},LensInto:function(bN,bO,bP){var bQ,bR,bS,bT;bQ=this;bR=h.Id();bS=(bT=this.FindByKeyAsView(bP),y.Map(bN,bT));return{RId:function(){return bR;},RView:function(){return bS;},RUpdM:function(bU){return bQ.UpdateBy(function(bV){var bW;bW=bU(bN(bV));return bW==null?null:{$:1,$0:bO(bV,bW.$0)};},bP);},RUpd:function(bU){return bQ.UpdateBy(function(bV){return{$:1,$0:bO(bV,bU(bN(bV)))};},bP);},set_RVal:function(bU){return this.RSet(bU);},RVal:function(){return this.RGet();},RSet:function(bU){return bQ.UpdateBy(function(bV){return{$:1,$0:bO(bV,bU)};},bP);},RGet:function(){return bN(bQ.FindByKey(bP));}};},get_LengthAsView:function(){var bN;bN=this["var"].RView();return y.Map(bt.length,bN);},get_Length:function(){return bt.length(this["var"].RVal());},Clear:function(){this["var"].set_RVal(this.storage.SSet([]));this.ObsoleteAll();},UpdateBy:function(bN,bO){var bP,bQ,bR,bS,bT;bP=this;bQ=this["var"].RVal();bR=bt.tryFindIndex(function(bU){return bC.Equals(bP.key(bU),bO);},bQ);(bR!=null?bR.$==1:false)?(bS=bR.$0,bT=bN(bt.get(bQ,bS)),(bT!=null?bT.$==1:false)?(this["var"].set_RVal(this.storage.SSetAt(bS,bT.$0,bQ)),this.ObsoleteKey(bO)):void 0):void 0;},UpdateAll:function(bN){var bO,bP;bO=this;bP=this["var"];bP.RUpd(function(bQ){var bR;bR=function(bS,bT){var bU;bU=function(bV){bt.set(bQ,bS,bV);};return function(bV){if(bV==null);else bU(bV.$0);}(bN(bT));};(function(bS){bt.iteri(bR,bS);}(bQ));return bO.storage.SSet(bQ);});this.ObsoleteAll();},FindByKeyAsView:function(bN){var bO;bO=function(bP){return bP.$0;};return function(bP){return y.Map(bO,bP);}(this.TryFindByKeyAsView(bN));},TryFindByKeyAsView:function(bN){var bO;bO=this;return function(){var bP,bQ,bR,bS;bP=(bQ=null,[bO.it.TryGetValue(bN,{get:function(){return bQ;},set:function(bT){bQ=bT;}}),bQ]);return bP[0]?bP[1]:(bR=bO.TryFindByKey(bN),(bS=w.CreateWithValue(bR),(bO.it.Add(bN,bS),bS)));};},TryFindByKey:function(bN){var bO;bO=this;return bt.tryFind(function(bP){return bC.Equals(bO.key(bP),bN);},this["var"].RVal());},FindByKey:function(bN){var bO;bO=this;return bt.find(function(bP){return bC.Equals(bO.key(bP),bN);},this["var"].RVal());},TryFindAsView:function(bN){var bO;bO=function(bP){return bt.tryFind(bN,bP);};return function(bP){return y.Map(bO,bP);}(this["var"].RView());},FindAsView:function(bN){var bO;bO=function(bP){return bt.find(bN,bP);};return function(bP){return y.Map(bO,bP);}(this["var"].RView());},TryFind:function(bN){return bt.tryFind(bN,this["var"].RVal());},Find:function(bN){return bt.find(bN,this["var"].RVal());},ContainsKeyAsView:function(bN){var bO,bP,bQ;bO=this;bP=(bQ=function(bR){return bC.Equals(bO.key(bR),bN);},function(bR){return bt.exists(bQ,bR);});return function(bR){return y.Map(bP,bR);}(this["var"].RView());},ContainsKey:function(bN){var bO;bO=this;return bt.exists(function(bP){return bC.Equals(bO.key(bP),bN);},this["var"].RVal());},Set:function(bN){this["var"].set_RVal(this.storage.SSet(bN));this.ObsoleteAll();},Iter:function(bN){bt.iter(bN,this["var"].RVal());},RemoveByKey:function(bN){var bO,bP,bQ;bO=this;this["var"].set_RVal((bP=this.storage,(bQ=this["var"].RVal(),bP.SRemoveIf(function(bR){return bC.Equals(bO.key(bR),bN);},bQ))));this.ObsoleteKey(bN);},RemoveBy:function(bN){var bO,bP,bQ,bR;bO=this["var"].RVal();for(bP=0,bQ=bO.length-1;bP<=bQ;bP++){bR=bt.get(bO,bP);bN(bR)?this.ObsoleteKey(this.key(bR)):void 0;}this["var"].set_RVal(this.storage.SRemoveIf(bN,this["var"].RVal()));},Remove:function(bN){var bO,bP,bQ,bR,bS;bO=this;bP=this["var"].RVal();I.Contains(bO.key,bN,bP)?(bQ=bO.key,bR=bQ(bN),this["var"].set_RVal((bS=this.storage,bS.SRemoveIf(function(bT){return bC.Equals(bQ(bT),bR);},bP))),this.ObsoleteKey(bR)):void 0;},PrependMany:function(bN){var bO,bP,bQ,bR;bO=this;bP=new bG.New$2();this["var"].set_RVal(this.storage.SPrependMany(bP,(bQ=this["var"].RVal(),((bR=function(bS,bT){var bU,bV;bU=bO.key(bT);bO.ObsoleteKey(bU);bV=bt.tryFindIndex(function(bW){return bC.Equals(bO.key(bW),bU);},bS);return bV==null?(bP.Add(bT),bS):bO.storage.SSetAt(bV.$0,bT,bS);},(bB.Curried3(bz.fold))(bR))(bQ))(bN))));},Prepend:function(bN){var bO,bP,bQ,bR;bO=this;bP=this["var"].RVal();bQ=this.key(bN);bR=bt.tryFindIndex(function(bS){return bC.Equals(bO.key(bS),bQ);},bP);(bR!=null?bR.$==1:false)?this["var"].set_RVal(this.storage.SSetAt(bR.$0,bN,bP)):this["var"].set_RVal(this.storage.SPrepend(bN,bP));this.ObsoleteKey(bQ);},AppendMany:function(bN){var bO,bP,bQ,bR;bO=this;bP=new bG.New$2();this["var"].set_RVal(this.storage.SAppendMany(bP,(bQ=this["var"].RVal(),((bR=function(bS,bT){var bU,bV;bU=bO.key(bT);bO.ObsoleteKey(bU);bV=bt.tryFindIndex(function(bW){return bC.Equals(bO.key(bW),bU);},bS);return bV==null?(bP.Add(bT),bS):bO.storage.SSetAt(bV.$0,bT,bS);},(bB.Curried3(bz.fold))(bR))(bQ))(bN))));},Append:function(bN){var bO,bP,bQ,bR;bO=this;bP=this["var"].RVal();bQ=this.key(bN);bR=bt.tryFindIndex(function(bS){return bC.Equals(bO.key(bS),bQ);},bP);(bR!=null?bR.$==1:false)?this["var"].set_RVal(this.storage.SSetAt(bR.$0,bN,bP)):this["var"].set_RVal(this.storage.SAppend(bN,bP));this.ObsoleteKey(bQ);},ObsoleteAll:function(){var bN;bN=function(bO){w.MarkObsolete(bO.V);};(function(bO){bz.iter(bN,bO);}(this.it));this.it.Clear();},ObsoleteKey:function(bN){var bO,bP,bQ,bR;bO=(bP=null,[this.it.TryGetValue(bN,{get:function(){return bP;},set:function(bS){bP=bS;}}),bP]);bO[0]?(bQ=bO[1],w.MarkObsolete(bQ),bR=this.it.Remove(bN)):void 0;},GetEnumerator0:function(){return bu.Get0(this["var"].RVal());},GetEnumerator:function(){return bu.Get(this["var"].RVal());}},null,H);H.New=bB.Ctor(function(bN,bO){var bP;bP=x.Create$1(bt.ofSeq(bz.distinctBy(bN,bO.SInit())));H.New$3.call(this,bN,bP,bO);},H);H.New$1=bB.Ctor(function(bN){H.New$2.call(this,bN,[]);},H);H.New$2=bB.Ctor(function(bN,bO){var bP;bP=bt.ofSeq(bO);H.New$3.call(this,bN,x.Create$1(bP),E.InMemory(bP));},H);H.New$3=bB.Ctor(function(bN,bO,bP){var bQ;this.key=bN;this["var"]=bO;this.storage=bP;this.v=(bQ=this["var"].RView(),y.Map(function(bR){return bR.slice();},bQ));this.it=new bK.New$5();},H);I.Contains=function(bN,bO,bP){var bQ;bQ=bN(bO);return bt.exists(function(bR){return bC.Equals(bN(bR),bQ);},bP);};H.Wrap=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW;bR=[new bK.New$5()];bS=(bT=function(bX){var bY;bY=bP(bX);bR[0].set_Item(bN.key(bX),bY);return bY;},function(bX){return bt.map(bT,bX);}(bN["var"].RVal()));bU=(bV=bN["var"],(bW=function(bX){var bY,bZ,b0;bY=new bK.New$5();bZ=(b0=function(b1){var b2,b3;b2=bN.key(b1);b3=bR[0].ContainsKey(b2)?bQ(bR[0].get_Item(b2),b1):bP(b1);bY.set_Item(b2,b3);return b3;},function(b1){return bt.map(b0,b1);}(bX));bR[0]=bY;return bZ;},function(bX){return x.Lens(bV,bW,function(bY,bZ){return(bX(bY))(bZ);});})(function(){return function(bX){var bY,bZ,b0;bY=new bK.New$5();bZ=(b0=function(b1){var b2;b2=bO(b1);bY.set_Item(bN.key(b2),b1);return b2;},function(b1){return bt.map(b0,b1);}(bX));bR[0]=bY;return bZ;};}));return new H.New$3(function(bX){var bY;bY=bN.key;return function(bZ){return bY(bO(bZ));}(bX);},bU,E.InMemory(bS));};H.FromSeq=function(bN){return H.Create(a.id,bN);};H.Create=function(bN,bO){var bP;bP=E.InMemory(bt.ofSeq(bO));return H.CreateWithStorage(bN,bP);};H.CreateWithStorage=function(bN,bO){return new H.New(bN,bO);};J.$cctor=bB.Cctor(function(){J.Default={Encode:a.id,Decode:a.id};J.$cctor=a.ignore;});K=d.ReactiveExtensions=bB.Class({},null,K);K.New=bB.Ctor(function(){},K);L=d.DoubleInterpolation=bB.Class({Interpolate:function(bN,bO,bP){return bO+bN*(bP-bO);}},null,L);L.DoubleInterpolation=new L({$:0});M.get_Double=function(){return L.DoubleInterpolation;};N=d.Easing=bB.Class({TransformTime:function(bN){return this.transformTime(bN);}},null,N);N.get_CubicInOut=function(){return O.CubicInOut();};N.Custom=function(bN){return new N.New(bN);};N.New=bB.Ctor(function(bN){this.transformTime=bN;},N);O.CubicInOut=function(){S.$cctor();return S.CubicInOut;};P.get_Empty=function(){return{$:0,$0:p.Empty()};};P.WhenDone=function(bN,bO){var bP;bP={$:0,$0:p.Single({$:0,$0:bN})};return function(bQ){return P.Append(bP,bQ);}(bO);};P.Run=function(bN,bO){var bP,bQ;bP=bO.Duration;bQ=function(bR){var bS;function bT(bU,bV){var bW,bX;bW=bV-bU;bO.Compute(bW);bN();return bW<=bP?(bX=a.requestAnimationFrame(function(bY){bT(bU,bY);}),void 0):bR();}bS=a.requestAnimationFrame(function(bU){bT(bU,bU);});};return bD.FromContinuations(function(bR,bS,bT){return bQ.apply(null,[bR,bS,bT]);});};P.Play=function(bN){return bD.Delay(function(){var bO,bP;bO=(bP=function(){},function(bQ){return P.Run(bP,bQ);}(Q.Actions(bN)));return bD.Bind(bO,function(){Q.Finalize(bN);return bD.Return(null);});});};P.Pack=function(bN){return{$:0,$0:p.Single({$:1,$0:bN})};};P.Map=function(bN,bO){var bP;return Q.Def(bO.Duration,(bP=bO.Compute,function(bQ){return bN(bP(bQ));}));};P.Delayed=function(bN,bO,bP,bQ,bR,bS){return{Compute:function(bT){return bT<=bQ?bR:bN.Interpolate(bO.TransformTime((bT-bQ)/bP),bR,bS);},Duration:bP+bQ};};P.Simple=function(bN,bO,bP,bQ,bR){return{Compute:function(bS){return bN.Interpolate(bO.TransformTime(bS/bP),bQ,bR);},Duration:bP};};P.Const=function(bN){return Q.Const(bN);};P.Concat=function(bN){return{$:0,$0:p.Concat(bz.map(Q.List,bN))};};P.Append=function(bN,bO){var bP,bQ;bP=bN.$0;bQ=bO.$0;return{$:0,$0:p.Append(bP,bQ)};};P.set_UseAnimations=function(bN){Q.set_UseAnimations(bN);};P.get_UseAnimations=function(){return Q.UseAnimations();};Q.UseAnimations=function(){S.$cctor();return S.UseAnimations;};Q.set_UseAnimations=function(bN){S.$cctor();S.UseAnimations=bN;};Q.Actions=function(bN){var bO,bP;bO=bN.$0;return Q.ConcatActions((bP=function(bQ){return bQ.$==1?{$:1,$0:bQ.$0}:null;},function(bQ){return bt.choose(bP,bQ);}(p.ToArray(bO))));};Q.ConcatActions=function(bN){var bO,bP,bQ,bR,bS;bO=e.ofSeqNonCopying(bN);bP=bt.length(bO);return bP===0?Q.Const():bP===1?bt.get(bO,0):(bQ=bz.max((bR=function(bT){return bT.Duration;},function(bT){return bz.map(bR,bT);}(bO))),(bS=bt.map(function(bT){return Q.Prolong(bQ,bT);},bO),Q.Def(bQ,function(bT){bt.iter(function(bU){bU.Compute(bT);},bS);})));};Q.Prolong=function(bN,bO){var bP,bQ,bR;bP=bO.Compute;bQ=bO.Duration;bR=bJ.Create(function(){return bO.Compute(bO.Duration);});return{Compute:function(bS){return bS>=bQ?bR.f():bP(bS);},Duration:bN};};Q.Const=function(bN){return Q.Def(0,function(){return bN;});};Q.Def=function(bN,bO){return{Compute:bO,Duration:bN};};Q.Finalize=function(bN){var bO,bP;bO=bN.$0;bP=function(bQ){if(bQ.$==0)bQ.$0();};(function(bQ){bt.iter(bP,bQ);}(p.ToArray(bO)));};Q.List=function(bN){return bN.$0;};R=d.Trans=bB.Class({Copy:function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV;bR=this;bS=bH.DefaultArg(bN,function(bW){return function(bX){return bR.TChange(bW,bX);};});bT=bH.DefaultArg(bO,this.get_TEnter());bU=bH.DefaultArg(bP,this.get_TExit());bV=bH.DefaultArg(bQ,this.get_TFlags());return new R.New$3(function(bW,bX){return(bS(bW))(bX);},bT,bU,bV);},get_TFlags:function(){return this.flags;},get_TExit:function(){return this.exit;},get_TEnter:function(){return this.enter;},TChange:function(bN,bO){return this.change(bN,bO);}},null,R);R.New=bB.Ctor(function(bN,bO,bP){R.New$3.call(this,bN,bC.Equals(bO,null)?P.Const:bO,bC.Equals(bP,null)?P.Const:bP,1|(bC.Equals(bO,null)?0:2)|(bC.Equals(bP,null)?0:4));},R);R.New$1=bB.Ctor(function(bN){R.New$3.call(this,bN,P.Const,P.Const,1);},R);R.New$2=bB.Ctor(function(){R.New$3.call(this,function(bN,bO){return P.Const(bO);},P.Const,P.Const,0);},R);R.New$3=bB.Ctor(function(bN,bO,bP,bQ){this.change=bN;this.enter=bO;this.exit=bP;this.flags=bQ;},R);R.Exit=function(bN,bO){return bO.Copy(null,null,{$:1,$0:bN},{$:1,$0:bO.get_TFlags()|4});};R.Enter=function(bN,bO){return bO.Copy(null,{$:1,$0:bN},null,{$:1,$0:bO.get_TFlags()|2});};R.Change=function(bN,bO){return bO.Copy({$:1,$0:bN},null,null,{$:1,$0:bO.get_TFlags()|1});};R.Create=function(bN){return new R.New$1(bN);};R.Trivial=function(){return new R.New$2();};R.CanAnimateExit=function(bN){var bO,bP;bO=bN.get_TFlags();bP=4;return(bO&bP)===bP;};R.CanAnimateEnter=function(bN){var bO,bP;bO=bN.get_TFlags();bP=2;return(bO&bP)===bP;};R.CanAnimateChange=function(bN){var bO,bP;bO=bN.get_TFlags();bP=1;return(bO&bP)===bP;};R.AnimateExit=function(bN,bO){return(bN.get_TExit())(bO);};R.AnimateEnter=function(bN,bO){return(bN.get_TEnter())(bO);};R.AnimateChange=function(bN,bO,bP){return bN.TChange(bO,bP);};S.$cctor=bB.Cctor(function(){S.CubicInOut=N.Custom(function(bN){var bO;bO=bN*bN;return 3*bO-2*(bO*bN);});S.UseAnimations=true;S.$cctor=a.ignore;});T=d.AnimatedAttrNode=bB.Class({sync:function(bN){var bO,bP;if(this.dirty){bO=this.logical;bO==null?void 0:(bP=bO.$0,(this.push(bN))(bP));this.visible=this.logical;this.dirty=false;}},pushVisible:function(bN,bO){this.visible={$:1,$0:bO};this.dirty=true;(this.push(bN))(bO);},NChanged:function(){return this.updates;},NSync:function(bN){},NGetExitAnim:function(bN){var bO,bP,bQ,bR,bS,bT;bO=this;bP=function(){bO.dirty=true;bO.visible=null;};return function(bU){return P.WhenDone(bP,bU);}((bQ=this.visible,(bQ!=null?bQ.$==1:false)?(bR=bQ.$0,P.Pack((bS=function(bU){bO.pushVisible(bN,bU);},function(bU){return P.Map(bS,bU);}((bT=this.tr,R.AnimateExit(bT,bR)))))):P.get_Empty()));},NGetEnterAnim:function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0;bO=this;bP=function(){bO.sync(bN);};return function(b1){return P.WhenDone(bP,b1);}((bQ=this.visible,(bR=this.logical,((bQ!=null?bQ.$==1:false)?(bR!=null?bR.$==1:false)?this.dirty?(bS=[bR.$0,bQ.$0],true):false:false:false)?(bT=bS[0],(bU=bS[1],P.Pack((bV=function(b1){bO.pushVisible(bN,b1);},function(b1){return P.Map(bV,b1);}((bW=this.tr,R.AnimateChange(bW,bU,bT))))))):(bQ==null?(bR!=null?bR.$==1:false)?true:false:false)?(bY=bR.$0,P.Pack((bZ=function(b1){bO.pushVisible(bN,b1);},function(b1){return P.Map(bZ,b1);}((b0=this.tr,R.AnimateEnter(b0,bY)))))):P.get_Empty())));},NGetChangeAnim:function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV,bW;bO=this;bP=function(){bO.sync(bN);};return function(bX){return P.WhenDone(bP,bX);}((bQ=this.visible,(bR=this.logical,((bQ!=null?bQ.$==1:false)?(bR!=null?bR.$==1:false)?this.dirty?(bS=[bR.$0,bQ.$0],true):false:false:false)?(bT=bS[0],(bU=bS[1],P.Pack((bV=function(bX){bO.pushVisible(bN,bX);},function(bX){return P.Map(bV,bX);}((bW=this.tr,R.AnimateChange(bW,bU,bT))))))):P.get_Empty())));}},null,T);T.New=bB.Ctor(function(bN,bO,bP){var bQ,bR;bQ=this;this.tr=bN;this.push=bP;this.logical=null;this.visible=null;this.dirty=true;this.updates=(bR=function(bS){bQ.logical={$:1,$0:bS};bQ.dirty=true;},function(bS){return y.Map(bR,bS);}(bO));},T);U=d.DynamicAttrNode=bB.Class({NChanged:function(){return this.updates;},NSync:function(bN){if(this.dirty){(this.push(bN))(this.value);this.dirty=false;}},NGetExitAnim:function(bN){return P.get_Empty();},NGetEnterAnim:function(bN){return P.get_Empty();},NGetChangeAnim:function(bN){return P.get_Empty();}},null,U);U.New=bB.Ctor(function(bN,bO){var bP,bQ;bP=this;this.push=bO;this.value=void 0;this.dirty=false;this.updates=(bQ=function(bR){bP.value=bR;bP.dirty=true;},function(bR){return y.Map(bQ,bR);}(bN));},U);V=d.AttrProxy=bB.Class({},null,V);V.Handler=function(bN,bO){return Z.Static(function(bP){bP.addEventListener(bN,function(bQ){return(bO(bP))(bQ);},false);});};V.Concat=function(bN){var bO,bP;bO=e.ofSeqNonCopying(bN);bP=Z.EmptyAttr();return e.TreeReduce(bP,V.Append,bO);};V.Append=function(bN,bO){return Z.AppendTree(bN,bO);};V.Create=function(bN,bO){return Z.Static(function(bP){r.SetAttr(bP,bN,bO);});};Y.New=function(bN,bO,bP,bQ){var bR;bR={DynElem:bN,DynFlags:bO,DynNodes:bP};bB.SetOptional(bR,"OnAfterRender",bQ);return bR;};Z.Static=function(bN){return new V({$:3,$0:bN});};Z.Dynamic=function(bN,bO){return new V({$:1,$0:new U.New(bN,bO)});};Z.Animated=function(bN,bO,bP){var bQ,bR,bS;bQ=new T.New(bN,bO,bP);bR=4;R.CanAnimateEnter(bN)?bR=bR|1:void 0;R.CanAnimateExit(bN)?bR=bR|2:void 0;bS=new V({$:1,$0:bQ});Z.SetFlags(bS,bR);return bS;};Z.EmptyAttr=function(){_2.$cctor();return _2.EmptyAttr;};Z.AppendTree=function(bN,bO){return bN===null?bO:bO===null?bN:new V({$:2,$0:bN,$1:bO});};Z.GetChangeAnim=function(bN){return Z.GetAnim(bN,function(bO,bP){return bO.NGetChangeAnim(bP);});};Z.GetExitAnim=function(bN){return Z.GetAnim(bN,function(bO,bP){return bO.NGetExitAnim(bP);});};Z.GetEnterAnim=function(bN){return Z.GetAnim(bN,function(bO,bP){return bO.NGetEnterAnim(bP);});};Z.GetAnim=function(bN,bO){var bP;return P.Concat((bP=function(bQ){return bO(bQ,bN.DynElem);},function(bQ){return bt.map(bP,bQ);}(bN.DynNodes)));};Z.Updates=function(bN){var bO,bP;bO=bN.DynNodes;bP=y.Const();return e.MapTreeReduce(function(bQ){return bQ.NChanged();},bP,y.Map2Unit,bO);};Z.Empty=function(bN){return Y.New(bN,0,[],null);};Z.Insert=function(bN,bO){var bP,bQ,bR;function bS(bT){var bU;if(!(bT===null))if(bT!=null?bT.$==1:false)bP.push(bT.$0);else if(bT!=null?bT.$==2:false){bU=bT.$1;bS(bT.$0);bS(bU);}else if(bT!=null?bT.$==3:false)bT.$0(bN);else if(bT!=null?bT.$==4:false)bQ.push(bT.$0);}bP=[];bQ=[];bS(bO);bR=bP.slice(0);return Y.New(bN,Z.Flags(bO),bR,bQ.length===0?null:{$:1,$0:function(bT){bz.iter(function(bU){bU(bT);},bQ);}});};Z.Sync=function(bN,bO){var bP;bP=function(bQ){bQ.NSync(bN);};(function(bQ){bt.iter(bP,bQ);}(bO.DynNodes));};Z.SetFlags=function(bN,bO){bN.flags=bO;};Z.Flags=function(bN){return(bN!==null?bN.hasOwnProperty("flags"):false)?bN.flags:0;};Z.HasExitAnim=function(bN){var bO;bO=2;return(bN.DynFlags&bO)===bO;};Z.HasEnterAnim=function(bN){var bO;bO=1;return(bN.DynFlags&bO)===bO;};Z.HasChangeAnim=function(bN){var bO;bO=4;return(bN.DynFlags&bO)===bO;};_0=d.CheckedInput=bB.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,_0);_0.Make=function(bN){return new _0({$:0,$0:bN,$1:a.String(bN)});};_1.ValidateForm=function(){return _1.OnAfterRender(function(bN){if(a.H5F)a.H5F.setup(bN);});};_1.Checked=function(bN){var bO;bO=function(bP){return!bC.Equals(bN.RVal(),bP.checked)?bN.set_RVal(bP.checked):null;};return V.Concat([_1.DynamicProp("checked",bN.RView()),_1.Handler("change",function(bP){return function(bQ){return bO(bP,bQ);};}),_1.Handler("click",function(bP){return function(bQ){return bO(bP,bQ);};})]);};_1.FloatValue=function(bN){return _1.CustomVar(bN,function(bO,bP){var bQ;bQ=bP.get_Input();return bO.value!==bQ?void(bO.value=bQ):null;},function(bO){var bP,bQ;bP=bO.value;return{$:1,$0:f.isBlank(bP)?(bO.checkValidity?bO.checkValidity():true)?new _0({$:2,$0:bP}):new _0({$:1,$0:bP}):(bQ=+bP,a.isNaN(bQ)?new _0({$:1,$0:bP}):new _0({$:0,$0:bQ,$1:bP}))};});};_1.FloatValueUnchecked=function(bN){return _1.CustomValue(bN,a.String,function(bO){var bP;return f.isBlank(bO)?{$:1,$0:0}:(bP=+bO,a.isNaN(bP)?null:{$:1,$0:bP});});};_1.IntValue=function(bN){return _1.CustomVar(bN,function(bO,bP){var bQ;bQ=bP.get_Input();return bO.value!==bQ?void(bO.value=bQ):null;},function(bO){var bP,bQ,bR,bS;bP=bO.value;return{$:1,$0:f.isBlank(bP)?(bO.checkValidity?bO.checkValidity():true)?new _0({$:2,$0:bP}):new _0({$:1,$0:bP}):(bQ=(bR=0,[bL.TryParse(bP,{get:function(){return bR;},set:function(bT){bR=bT;}}),bR]),bQ[0]?(bS=bQ[1],new _0({$:0,$0:bS,$1:bP})):new _0({$:1,$0:bP}))};});};_1.IntValueUnchecked=function(bN){return _1.CustomValue(bN,a.String,function(bO){var bP;return f.isBlank(bO)?{$:1,$0:0}:(bP=+bO,bP!==bP>>0?null:{$:1,$0:bP});});};_1.Value=function(bN){var bO,bP;return _1.CustomValue(bN,a.id,(bO=a.id,(bP=function(bQ){return{$:1,$0:bQ};},function(bQ){return bP(bO(bQ));})));};_1.ContentEditableHtml=function(bN){var bO,bP;bO=_1.CustomVar(bN,function(bQ,bR){bQ.innerHTML=bR;},function(bQ){return{$:1,$0:bQ.innerHTML};});bP=V.Create("contenteditable","true");return V.Append(bP,bO);};_1.ContentEditableText=function(bN){var bO,bP;bO=_1.CustomVar(bN,function(bQ,bR){bQ.textContent=bR;},function(bQ){return{$:1,$0:bQ.textContent};});bP=V.Create("contenteditable","true");return V.Append(bP,bO);};_1.CustomValue=function(bN,bO,bP){return _1.CustomVar(bN,function(bQ,bR){bQ.value=bO(bR);},function(bQ){return bP(bQ.value);});};_1.CustomVar=function(bN,bO,bP){var bQ,bR;bQ=function(bS){return bN.RUpdM(function(bT){var bU,bV,bW;bU=bP(bS);return((bU!=null?bU.$==1:false)?(bW=bU.$0,!bC.Equals(bW,bT))?(bV=[bU,bU.$0],true):false:false)?bV[0]:null;});};bR=function(bS,bT){var bU,bV,bW;bU=bP(bS);return((bU!=null?bU.$==1:false)?(bW=bU.$0,bC.Equals(bW,bT))?(bV=bU.$0,true):false:false)?null:bO(bS,bT);};return V.Concat([_1.Handler("change",function(bS){return function(bT){return bQ(bS,bT);};}),_1.Handler("input",function(bS){return function(bT){return bQ(bS,bT);};}),_1.Handler("keypress",function(bS){return function(bT){return bQ(bS,bT);};}),_1.DynamicCustom(function(bS){return function(bT){return bR(bS,bT);};},bN.RView())]);};_1.DynamicProp=function(bN,bO){return Z.Dynamic(bO,function(bP){return function(bQ){bP[bN]=bQ;};});};_1.DynamicPred=function(bN,bO,bP){var bQ,bR;bQ=function(bS,bT){var bU,bV;bU=bT[0];bV=bT[1];return bU?r.SetAttr(bS,bN,bV):r.RemoveAttr(bS,bN);};bR=y.Map2(function(bS,bT){return[bS,bT];},bO,bP);return Z.Dynamic(bR,function(bS){return function(bT){return bQ(bS,bT);};});};_1.DynamicClass=function(bN,bO,bP){return Z.Dynamic(bO,function(bQ){return function(bR){return bP(bR)?r.AddClass(bQ,bN):r.RemoveClass(bQ,bN);};});};_1.OnAfterRenderView=function(bN,bO){var bP,bQ,bR;bP=h.Id();bQ=_1.OnAfterRender(function(bS){bO(bS,bS[bP]);});bR=_1.DynamicCustom(function(bS){return function(bT){bS[bP]=bT;};},bN);return V.Append(bQ,bR);};_1.OnAfterRender=function(bN){return new V({$:4,$0:bN});};_1.HandlerView=function(bN,bO,bP){return Z.Static(function(bQ){var bR;bR=bP(bQ);bQ.addEventListener(bN,function(bS){var bT;bT=bR(bS);return y.Get(bT,bO);},false);});};_1.Handler=function(bN,bO){return Z.Static(function(bP){bP.addEventListener(bN,function(bQ){return(bO(bP))(bQ);},false);});};_1.DynamicStyle=function(bN,bO){return Z.Dynamic(bO,function(bP){return function(bQ){return r.SetStyle(bP,bN,bQ);};});};_1.DynamicCustom=function(bN,bO){return Z.Dynamic(bO,bN);};_1.Dynamic=function(bN,bO){return Z.Dynamic(bO,function(bP){return function(bQ){return r.SetAttr(bP,bN,bQ);};});};_1.AnimatedStyle=function(bN,bO,bP,bQ){return Z.Animated(bO,bP,function(bR){return function(bS){return r.SetStyle(bR,bN,bQ(bS));};});};_1.Animated=function(bN,bO,bP,bQ){return Z.Animated(bO,bP,function(bR){return function(bS){return r.SetAttr(bR,bN,bQ(bS));};});};_1.Class=function(bN){return Z.Static(function(bO){r.AddClass(bO,bN);});};_1.Style=function(bN,bO){return Z.Static(function(bP){r.SetStyle(bP,bN,bO);});};_2.$cctor=bB.Cctor(function(){_2.EmptyAttr=null;_2.$cctor=a.ignore;});_3.EmptyDoc={$:3};_4=d.DocElemNode=bB.Class({GetHashCode:function(){return this.ElKey;},Equals:function(bN){return this.ElKey===bN.ElKey;}},null,_4);_4.New=function(bN,bO,bP,bQ,bR,bS){var bT;return new _4((bT={Attr:bN,Children:bO,El:bQ,ElKey:bR},(bB.SetOptional(bT,"Delimiters",bP),bB.SetOptional(bT,"Render",bS),bT)));};_6.FoldBack=function(bN,bO,bP){var bQ;bQ=bO.$0;return bt.foldBack(bN,bQ,bP);};_6.Iter=function(bN,bO){var bP;bP=bO.$0;bt.iter(bN,bP);};_6.Except=function(bN,bO){var bP,bQ,bR;bP=bN.$0;bQ=bO.$0;return{$:0,$0:(bR=function(bS){var bT;bT=function(bU){return!(bS===bU);};return function(bU){return bt.forall(bT,bU);}(bP);},function(bS){return bt.filter(bR,bS);}(bQ))};};_6.DocChildren=function(bN){var bO;function bP(bQ){var bR,bS,bT;if(bQ.$==2)bP(bQ.$0.Current);else if(bQ.$==1)bO.push(bQ.$0.El);else if(bQ.$==3);else if(bQ.$==5)bO.push(bQ.$0);else if(bQ.$==4)bO.push(bQ.$0.Text);else if(bQ.$==6){bR=bQ.$0;bS=function(bU){if(bU.constructor===a.Object)bP(bU);else bO.push(bU);};(function(bU){bt.iter(bS,bU);}(bR.Els));}else{bT=bQ.$1;bP(bQ.$0);bP(bT);}}bO=[];bP(bN.Children);return{$:0,$0:e.ofSeqNonCopying(bO)};};_6.Children=function(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bO!=null?bO.$==1:false){bR=bO.$0[1];bS=bO.$0[0];bT=a.Array.prototype.constructor.apply(a.Array,[]);bP=bS.nextSibling;while(bP!==bR){bU=bT.push(bP);bP=bP.nextSibling;}return{$:0,$0:bT};}else return{$:0,$0:bt.init(bN.childNodes.length,(bQ=bN.childNodes,function(bV){return bQ[bV];}))};};_7.ToArray=function(bN){return i.ToArray(bN.$0);};_7.get_Empty=function(){return{$:0,$0:new by.New$3()};};_7.IsEmpty=function(bN){return bN.$0.get_Count()===0;};_7.Intersect=function(bN,bO){var bP,bQ;bP=bN.$0;bQ=bO.$0;return{$:0,$0:i.Intersect(bP,bQ)};};_7.Except=function(bN,bO){var bP,bQ;bP=bN.$0;bQ=bO.$0;return{$:0,$0:i.Except(bP,bQ)};};_7.FindAll=function(bN){var bO;function bP(bR){var bS,bT,bU;if(bR.$==0){bS=bR.$1;bP(bR.$0);bP(bS);}else if(bR.$==1)bQ(bR.$0);else if(bR.$==2)bP(bR.$0.Current);else if(bR.$==6){bT=bR.$0;bU=bT.Holes;bt.iter(bQ,bU);}}function bQ(bR){bO.push(bR);bP(bR.Children);}bO=[];bP(bN);return{$:0,$0:new by.New$2(bO)};};_7.Filter=function(bN,bO){var bP;bP=bO.$0;return{$:0,$0:i.Filter(bN,bP)};};_8.New=function(bN,bO){return{PreviousNodes:bN,Top:bO};};_9.TextHoleRE=function(){bb.$cctor();return bb.TextHoleRE;};_9.LoadedTemplates=function(){bb.$cctor();return bb.LoadedTemplates;};_9.UpdateTextNode=function(bN,bO){bN.Value=bO;bN.Dirty=true;};_9.CreateTextNode=function(){return{Text:r.CreateText(""),Dirty:false,Value:""};};_9.UpdateEmbedNode=function(bN,bO){bN.Current=bO;bN.Dirty=true;};_9.CreateEmbedNode=function(){return{Current:_3.EmptyDoc,Dirty:false};};_9.PerformAnimatedUpdate=function(bN,bO){var bP;return P.get_UseAnimations()?bD.Delay(function(){var bQ,bR,bS,bT,bU;bQ=_7.FindAll(bO);bR=_9.ComputeChangeAnim(bN,bQ);bS=_9.ComputeEnterAnim(bN,bQ);bT=_9.ComputeExitAnim(bN,bQ);bU=P.Play(P.Append(bR,bT));return bD.Bind(bU,function(){_9.SyncElemNode(bN.Top);return bD.Bind(P.Play(bS),function(){bN.PreviousNodes=bQ;return bD.Return(null);});});}):(bP=function(bQ){var bR;bR=a.requestAnimationFrame(function(){_9.SyncElemNode(bN.Top);bQ();});},bD.FromContinuations(function(bQ,bR,bS){return bP.apply(null,[bQ,bR,bS]);}));};_9.ComputeEnterAnim=function(bN,bO){var bP,bQ,bR,bS;return P.Concat((bP=function(bT){return Z.GetEnterAnim(bT.Attr);},function(bT){return bt.map(bP,bT);}(_7.ToArray((bQ=(bR=function(bT){return Z.HasEnterAnim(bT.Attr);},function(bT){return _7.Filter(bR,bT);}(bO)),(bS=bN.PreviousNodes,_7.Except(bS,bQ)))))));};_9.ComputeChangeAnim=function(bN,bO){var bP,bQ,bR,bS,bT;bP=(bQ=function(bU){return Z.HasChangeAnim(bU.Attr);},function(bU){return _7.Filter(bQ,bU);});return P.Concat((bR=function(bU){return Z.GetChangeAnim(bU.Attr);},function(bU){return bt.map(bR,bU);}(_7.ToArray((bS=bP(bN.PreviousNodes),(bT=bP(bO),_7.Intersect(bS,bT)))))));};_9.ComputeExitAnim=function(bN,bO){var bP,bQ,bR;return P.Concat((bP=function(bS){return Z.GetExitAnim(bS.Attr);},function(bS){return bt.map(bP,bS);}(_7.ToArray((bQ=(bR=function(bS){return Z.HasExitAnim(bS.Attr);},function(bS){return _7.Filter(bR,bS);}(bN.PreviousNodes)),_7.Except(bO,bQ))))));};_9.CreateDelimitedRunState=function(bN,bO,bP){return _8.New(_7.get_Empty(),_9.CreateDelimitedElemNode(bN,bO,Z.EmptyAttr(),bP));};_9.CreateRunState=function(bN,bO){return _8.New(_7.get_Empty(),_9.CreateElemNode(bN,Z.EmptyAttr(),bO));};_9.CreateDelimitedElemNode=function(bN,bO,bP,bQ){var bR,bS;bR=bN.parentNode;_9.LinkPrevElement(bO,bQ);bS=Z.Insert(bR,bP);return _4.New(bS,bQ,{$:1,$0:[bN,bO]},bR,h.Int(),bB.GetOptional(bS.OnAfterRender));};_9.CreateElemNode=function(bN,bO,bP){var bQ;_9.LinkElement(bN,bP);bQ=Z.Insert(bN,bO);return _4.New(bQ,bP,null,bN,h.Int(),bB.GetOptional(bQ.OnAfterRender));};_9.SyncElemNode=function(bN){_9.SyncElement(bN);_9.Sync(bN.Children);_9.AfterRender(bN);};_9.Sync=function(bN){var bO,bP,bQ,bR,bS;if(bN.$==1)_9.SyncElemNode(bN.$0);else if(bN.$==2){bO=bN.$0;_9.Sync(bO.Current);}else if(bN.$==3);else if(bN.$==5);else if(bN.$==4){bP=bN.$0;bP.Dirty?(bP.Text.nodeValue=bP.Value,bP.Dirty=false):void 0;}else if(bN.$==6){bQ=bN.$0;bt.iter(function(bT){_9.SyncElemNode(bT);},bQ.Holes);bt.iter(function(bT){var bU,bV;bU=bT[0];bV=bT[1];Z.Sync(bU,bV);},bQ.Attrs);_9.AfterRender(bQ);}else{bR=bN.$1;bS=bN.$0;_9.Sync(bS);_9.Sync(bR);}};_9.AfterRender=function(bN){var bO,bP;bO=bB.GetOptional(bN.Render);(bO!=null?bO.$==1:false)?(bP=bO.$0,bP(bN.El),bB.SetOptional(bN,"Render",null)):void 0;};_9.InsertBeforeDelim=function(bN,bO){var bP,bQ,bR;bP=bN.parentNode;bQ=a.document.createTextNode("");bR=bP.insertBefore(bQ,bN);_9.LinkPrevElement(bN,bO);return bQ;};_9.LinkPrevElement=function(bN,bO){var bP;bP=_9.InsertDoc(bN.parentNode,bO,bN);};_9.LinkElement=function(bN,bO){var bP;bP=_9.InsertDoc(bN,bO,null);};_9.SyncElement=function(bN){function bO(bP){function bQ(bR){var bS,bT,bU;return bR.$==0?(bS=bR.$1,bQ(bR.$0)?true:bQ(bS)):bR.$==2?(bT=bR.$0,bT.Dirty?true:bQ(bT.Current)):bR.$==6?(bU=bR.$0,bU.Dirty?true:bt.exists(bO,bU.Holes)):false;}return bQ(bP.Children);}Z.Sync(bN.El,bN.Attr);bO(bN)?_9.DoSyncElement(bN):void 0;};_9.DoSyncElement=function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX;function bY(bZ,b0){var b1,b2;return bZ.$==1?bZ.$0.El:bZ.$==2?(b1=bZ.$0,b1.Dirty?(b1.Dirty=false,_9.InsertDoc(bO,b1.Current,b0)):bY(b1.Current,b0)):bZ.$==3?b0:bZ.$==4?bZ.$0.Text:bZ.$==5?bZ.$0:bZ.$==6?(b2=bZ.$0,(b2.Dirty?b2.Dirty=false:void 0,bt.foldBack(function(b3,b4){return b3.constructor===a.Object?bY(b3,b4):b3;},b2.Els,b0))):bY(bZ.$0,bY(bZ.$1,b0));}bO=bN.El;bP=_6.DocChildren(bN);bQ=(bR=(bS=bN.El,(bT=bB.GetOptional(bN.Delimiters),_6.Children(bS,bT))),_6.Except(bP,bR));bU=(bV=bN.El,function(bZ){r.RemoveNode(bV,bZ);});_6.Iter(bU,bQ);bX=bY(bN.Children,(bW=bB.GetOptional(bN.Delimiters),(bW!=null?bW.$==1:false)?bW.$0[1]:null));};_9.InsertDoc=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW;return bO.$==1?(bQ=bO.$0,_9.InsertNode(bN,bQ.El,bP)):bO.$==2?(bR=bO.$0,(bR.Dirty=false,_9.InsertDoc(bN,bR.Current,bP))):bO.$==3?bP:bO.$==4?(bS=bO.$0,_9.InsertNode(bN,bS.Text,bP)):bO.$==5?(bT=bO.$0,_9.InsertNode(bN,bT,bP)):bO.$==6?(bU=bO.$0,bt.foldBack(function(bX,bY){return bX.constructor===a.Object?_9.InsertDoc(bN,bX,bY):_9.InsertNode(bN,bX,bY);},bU.Els,bP)):(bV=bO.$1,(bW=bO.$0,_9.InsertDoc(bN,bW,_9.InsertDoc(bN,bV,bP))));};_9.InsertNode=function(bN,bO,bP){r.InsertAt(bN,bP,bO);return bO;};_=d.Doc=bB.Class({ReplaceInDom:function(bN){var bO,bP;bO=a.document.createTextNode("");bP=bN.parentNode.replaceChild(bO,bN);_.RunBefore(bO,this);}},null,_);_.Append=function(bN,bO){var bP,bQ,bR,bS;bP=(bQ=bN.updates,(bR=bO.updates,y.Map2Unit(bQ,bR)));bS={$:0,$0:bN.docNode,$1:bO.docNode};return _.Mk(bS,bP);};_.Concat=function(bN){var bO,bP;bO=e.ofSeqNonCopying(bN);bP=_.Empty();return e.TreeReduce(bP,_.Append,bO);};_.Empty=function(){var bN,bO;bN=_3.EmptyDoc;bO=y.Const();return _.Mk(bN,bO);};_.TextNode=function(bN){var bO,bP;bO={$:5,$0:r.CreateText(bN)};bP=y.Const();return _.Mk(bO,bP);};_.Verbatim=function(bN){var bO,bP,bQ,bR;bO=(bP=a.jQuery.parseHTML(bN),bC.Equals(bP,null)?[]:bP);bQ=e.MapTreeReduce(function(bS){return bC.Equals(bS.nodeType,a.Node.TEXT_NODE)?{$:5,$0:bS}:{$:1,$0:_9.CreateElemNode(bS,Z.EmptyAttr(),_3.EmptyDoc)};},_3.EmptyDoc,function(bS,bT){return{$:0,$0:bS,$1:bT};},bO);bR=y.Const();return _.Mk(bQ,bR);};_.SvgElementMixed=function(bN,bO){var bP,bQ,bR;bP=_.MixedNodes(bO);bQ=bP[1];bR=bP[0];return _.SvgElement(bN,bR,bQ);};_.SvgElement=function(bN,bO,bP){var bQ,bR,bS;bQ=V.Concat(bO);bR=_.Concat(bP);bS=r.CreateSvgElement(bN);return $.New(bS,bQ,bR);};_.ElementMixed=function(bN,bO){var bP,bQ,bR;bP=_.MixedNodes(bO);bQ=bP[1];bR=bP[0];return _.Element(bN,bR,bQ);};_.ConcatMixed=function(bN){return _.Concat(bz.map(_.ToMixedDoc,bN));};_.MixedNodes=function(bN){var bO,bP,bQ,bR;bO=new bG.New$2();bP=new bG.New$2();bQ=bu.Get(bN);try{while(bQ.MoveNext()){bR=bQ.Current();bR instanceof V?bO.Add(bR):bP.Add(_.ToMixedDoc(bR));}}finally{if("Dispose"in bQ)bQ.Dispose();}return[bO,bP];};_.ToMixedDoc=function(bN){var bO;return bN instanceof _?bN:typeof bN=="string"?_.TextNode(bN):bN instanceof a.Element?_.Static(bN):typeof bN=="function"?_.EmbedView(y.Map(_.ToMixedDoc,bN)):bN instanceof x?_.EmbedView((bO=bN.v,y.Map(_.ToMixedDoc,bO))):bC.Equals(bN,null)?_.Empty():_.TextNode(a.String(bN));};_.Element=function(bN,bO,bP){var bQ,bR,bS;bQ=V.Concat(bO);bR=_.Concat(bP);bS=r.CreateElement(bN);return $.New(bS,bQ,bR);};_.Radio=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW;bQ=r.CreateElement("input");bQ.addEventListener("click",function(){return bP.RSet(bO);},false);bR=(bS=bP.RView(),y.Map(function(bX){return bC.Equals(bX,bO);},bS));bT=_1.DynamicProp("checked",bR);bU=V.Create;bV=V.Concat(bs.append(bs.ofArray([bU("type","radio"),bU("name",bP.RId()),bT]),bs.ofSeq(bN)));bW=_.Empty();return $.New(bQ,bV,bW);};_.LinkView=function(bN,bO,bP,bQ){var bR,bS,bT,bU;bR=_1.HandlerView("click",bP,function(){return function(){return bQ;};});bS=V.Concat(bz.append([bR,V.Create("href","#")],bO));bT=r.CreateElement("a");bU=_.TextNode(bN);return $.New(bT,bS,bU);};_.Link=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=(bR=V.Concat(bO),(bS=V.Create("href","#"),V.Append(bS,bR)));bT=_.Clickable("a",bP);bU=_.TextNode(bN);return $.New(bT,bQ,bU);};_.ButtonView=function(bN,bO,bP,bQ){var bR,bS,bT,bU;bR=_1.HandlerView("click",bP,function(){return function(){return bQ;};});bS=V.Concat(bz.append([bR],bO));bT=r.CreateElement("button");bU=_.TextNode(bN);return $.New(bT,bS,bU);};_.Button=function(bN,bO,bP){var bQ,bR,bS;bQ=V.Concat(bO);bR=_.Clickable("button",bP);bS=_.TextNode(bN);return $.New(bR,bQ,bS);};_.Clickable=function(bN,bO){var bP;bP=r.CreateElement(bN);bP.addEventListener("click",function(bQ){bQ.preventDefault();return bO();},false);return bP;};_.CheckBoxGroup=function(bN,bO,bP){var bQ,bR,bS;bQ=(bR=function(bT,bU){return bU?bs.exists(function(bV){return bC.Equals(bO,bV);},bT)?bT:new bs.T({$:1,$0:bO,$1:bT}):bs.filter(function(bV){return!bC.Equals(bO,bV);},bT);},x.Lens(bP,(bS=function(bT){return bC.Equals(bO,bT);},function(bT){return bs.exists(bS,bT);}),function(bT,bU){return bR(bT,bU);}));return _.CheckBox(bN,bQ);};_.CheckBox=function(bN,bO){return _.InputInternal("input",function(){return bz.append(bN,[V.Create("type","checkbox"),_1.Checked(bO)]);});};_.SelectDynOptional=function(bN,bO,bP,bQ,bR){var bS,bT;bS=(bT=function(bU){return new bs.T({$:1,$0:null,$1:bs.map(function(bV){return{$:1,$0:bV};},bU)});},function(bU){return y.Map(bT,bU);}(bQ));return _.SelectDyn(bN,function(bU){return(bU!=null?bU.$==1:false)?bP(bU.$0):bO;},bS,bR);};_.SelectOptional=function(bN,bO,bP,bQ,bR){var bS;bS=new bs.T({$:1,$0:null,$1:bs.map(function(bT){return{$:1,$0:bT};},bQ)});return _.Select(bN,function(bT){return(bT!=null?bT.$==1:false)?bP(bT.$0):bO;},bS,bR);};_.Select=function(bN,bO,bP,bQ){return _.SelectImpl(bN,bO,function(bR){var bS;bR[0]=bP;return _.Concat((bS=function(bT,bU){var bV,bW;bV=bs.ofArray([V.Create("value",a.String(bT))]);bW=bs.ofArray([_.TextNode(bO(bU))]);return _.Element("option",bV,bW);},function(bT){return bs.mapi(bS,bT);}(bP)));},bQ);};_.SelectDyn=function(bN,bO,bP,bQ){return _.SelectImpl(bN,bO,function(bR){var bS,bT;bS=function(bU,bV){var bW,bX;bW=bs.ofArray([V.Create("value",a.String(bU))]);bX=bs.ofArray([_.TextNode(bO(bV))]);return _.Element("option",bW,bX);};return function(bU){return _.Convert(function(bV){return bS(bV[0],bV[1]);},bU);}((bT=function(bU){var bV;bR[0]=bU;bV=function(bW,bX){return[bW,bX];};return function(bW){return bz.mapi(bV,bW);}(bU);},function(bU){return y.Map(bT,bU);}(bP)));},bQ);};_.SelectImpl=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4;bR=[bs.T.Empty];bS=function(b5){return b5.selectedIndex;};bT=function(b5,b6){b5.selectedIndex=b6;};bU=function(b5){return bR[0].get_Item(bS(b5));};bV=function(b5){return bz.findIndex(function(b6){return bC.Equals(b5,b6);},bR[0]);};bW=function(b5,b6){return bT(b5,bV(b6));};bX=r.CreateElement("select");bY=(bZ=bQ.RView(),_1.DynamicCustom(function(b5){return function(b6){return bW(b5,b6);};},bZ));bX.addEventListener("change",function(){bQ.RUpdM(function(b5){var b6;b6=bU(bX);return bC.Equals(b5,b6)?null:{$:1,$0:b6};});},false);b0=(b1=(b2=V.Concat(bN),V.Append(bY,b2)),(b3=_1.OnAfterRender(function(b5){bW(b5,bQ.RGet());}),V.Append(b3,b1)));b4=bP(bR);return $.New(bX,b0,b4);};_.InputArea=function(bN,bO){return _.InputInternal("textarea",function(){return bz.append(bN,[_1.Value(bO)]);});};_.FloatInput=function(bN,bO){return _.InputInternal("input",function(){return bz.append(bN,[_1.FloatValue(bO),V.Create("type","number")]);});};_.FloatInputUnchecked=function(bN,bO){return _.InputInternal("input",function(){return bz.append(bN,[bO.RGet()===0?V.Create("value","0"):Z.EmptyAttr(),_1.FloatValueUnchecked(bO),V.Create("type","number")]);});};_.IntInput=function(bN,bO){return _.InputInternal("input",function(){return bz.append(bN,[_1.IntValue(bO),V.Create("type","number")]);});};_.IntInputUnchecked=function(bN,bO){return _.InputInternal("input",function(){return bz.append(bN,[bO.RGet()===0?V.Create("value","0"):Z.EmptyAttr(),_1.IntValueUnchecked(bO),V.Create("type","number")]);});};_.PasswordBox=function(bN,bO){return _.InputInternal("input",function(){return bz.append(bN,[_1.Value(bO),V.Create("type","password")]);});};_.Input=function(bN,bO){return _.InputInternal("input",function(){return bz.append(bN,[_1.Value(bO)]);});};_.InputInternal=function(bN,bO){var bP,bQ,bR;bP=r.CreateElement(bN);bQ=V.Concat(bO(bP));bR=_.Empty();return $.New(bP,bQ,bR);};_.ConvertSeqBy=function(bN,bO,bP){return _.Flatten(y.MapSeqCachedViewBy(bN,function(bQ,bR){return(bO(bQ))(bR);},bP));};_.ConvertSeq=function(bN,bO){return _.Flatten(y.MapSeqCachedView(bN,bO));};_.ConvertBy=function(bN,bO,bP){return _.Flatten(y.MapSeqCachedBy(bN,bO,bP));};_.Convert=function(bN,bO){return _.Flatten(y.MapSeqCached(bN,bO));};_.Flatten=function(bN){return _.EmbedView(y.Map(_.Concat,bN));};_.GetOrLoadTemplate=function(bN,bO,bP,bQ){_.PrepareTemplate(bN,bO,bP);return _.NamedTemplate(bN,bO,bQ);};_.NamedTemplate=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=_.ComposeName(bN,bO);bR=(bS=null,[_9.LoadedTemplates().TryGetValue(bQ,{get:function(){return bS;},set:function(bV){bS=bV;}}),bS]);return bR[0]?(bT=bR[1],(bU=bT.cloneNode(true),_.ChildrenTemplate(bU,bP))):(a.console.warn.apply(a.console,["Local template doesn't exist"].concat([bQ])),_.Empty());};_.LoadLocalTemplates=function(bN){(function(){var bO,bP,bQ,bR,bS;while(true){bP=a.document.querySelector("[ws-template]");if(bC.Equals(bP,null)){bQ=a.document.querySelector("[ws-children-template]");if(bC.Equals(bQ,null))return null;else{bR=bQ.getAttribute("ws-children-template");bQ.removeAttribute("ws-children-template");bO=function(bT){return function(){return r.ChildrenArray(bT);};}(bQ);_.PrepareTemplate(bN,{$:1,$0:bR},bO);}}else{bS=bP.getAttribute("ws-template");_.PrepareSingleTemplate(bN,{$:1,$0:bS},bP);}}}());};_.PrepareTemplate=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV;if(!_9.LoadedTemplates().ContainsKey(_.ComposeName(bN,bO))){bQ=bP();for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bt.get(bQ,bR);bU=bT.parentNode;bC.Equals(bU,null)?void 0:bV=bU.removeChild(bT);}_.PrepareTemplateStrict(bN,bO,bQ);}};_.PrepareTemplateStrict=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX;function bY(b3,b4,b5){var b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu;while(true)switch(b3){case 0:cb=bM.string(b4.nodeName,{$:1,$0:3},null).toLowerCase();cc=(b6=cb.indexOf(a.String.fromCharCode(46)),b6===-1?bN+"/"+cb:bv.Replace(cb,".","/"));if(!_9.LoadedTemplates().ContainsKey(cc))return a.console.warn.apply(a.console,["Instantiating non-loaded template"].concat([cc]));else{cd=_9.LoadedTemplates().get_Item(cc);ce=cd.cloneNode(true);cf=new by.New$3();cg=new bK.New$5();ch=b4.attributes;for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch.item(ci).name.toLowerCase();cl=(cm=ch.item(ci).nodeValue,cm===""?ck:cm.toLowerCase());cg.set_Item(ck,cl);!cf.Add(ck)?a.console.warn.apply(a.console,["Hole mapped twice"].concat([ck])):void 0;}for(cn=0,co=b4.childNodes.length-1;cn<=co;cn++){cp=b4.childNodes[cn];bC.Equals(cp.nodeType,a.Node.ELEMENT_NODE)?!cf.Add(cp.nodeName.toLowerCase())?a.console.warn.apply(a.console,["Hole filled twice"].concat([cc])):void 0:void 0;}cq=b4.childNodes.length===1?bC.Equals(b4.firstChild.nodeType,a.Node.TEXT_NODE):false;if(cq){b8=bV(ce,b4.firstChild.textContent);b9=(b_=function(cv){return function(cw){return cv.Add(cw);};}(cf),b$=function(){},function(cv){return b$(b_(cv));});((function(cv){return function(cw){if(cw==null);else cv(cw.$0);};}(b9))(b8));}bU(ce,cf);if(!cq){for(cr=0,cs=b4.childNodes.length-1;cr<=cs;cr++){ct=b4.childNodes[cr];bC.Equals(ct.nodeType,a.Node.ELEMENT_NODE)?ct.hasAttributes()?bT(ce,ct):bZ(ce,ct):void 0;}}bS(ce,cg);(((function(cv){var cw;cw=function(cx,cy){return bW(cv,cx,cy);};return function(cx){return function(cy){return cw(cx,cy);};};}(ce))(b4.parentNode))(b4));return ca=b4.parentNode.removeChild(b4);}case 1:if(b5!==null){cu=b5.nextSibling;if(bC.Equals(b5.nodeType,a.Node.TEXT_NODE))bR(b5);else if(bC.Equals(b5.nodeType,a.Node.ELEMENT_NODE))b1(b5);b3=1;b4=b4;b5=cu;}else return null;}}function bZ(b3,b4){var b5,b6,b8,b9,b_;function b7(b$,ca){var cb,cc,cd,ce,cf,cg;if(b8==="title"?b4.hasChildNodes():false){cd=(cb=b4.textContent,a.jQuery.parseHTML(cb));cc=b4.removeChild(b4.firstChild);for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=b4.appendChild(bt.get(cd,ce));}}else null;b1(b4);return bW(b4,b$,ca);}b8=b4.nodeName.toLowerCase();r.IterSelector(b3,"[ws-attr-holes]",function(b$){var ca,cb,cc,cd,ce,cf,cg,ch;cb=(ca=b$.getAttribute("ws-attr-holes"),bv.SplitChars(ca,[32],1));for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=bt.get(cb,cc);b$.setAttribute(ce,(cf=new a.RegExp("\\${"+b8+"}","ig"),cg=b$.getAttribute(ce),ch=b4.textContent,cf[a.Symbol.replace](cg,ch)));}});b9=b3.querySelector("[ws-hole="+b8+"]");if(bC.Equals(b9,null)){b5=b3.querySelector("[ws-replace="+b8+"]");return bC.Equals(b5,null)?null:(b7(b5.parentNode,b5),b6=b5.parentNode.removeChild(b5));}else{while(b9.hasChildNodes()){b_=b9.removeChild(b9.lastChild);}b9.removeAttribute("ws-hole");return b7(b9,null);}}function b0(b3){return bY(0,b3);}function b1(b3){var b4,b5,b6,b7;if((b4=b3.nodeName.toLowerCase(),bv.StartsWith(b4,"ws-"))?!b3.hasAttribute("ws-template"):false)b0(b3);else{bQ(b3);b5=b3.getAttribute("ws-template");if(b5===null){b6=b3.getAttribute("ws-children-template");if(b6===null)b2(b3,b3.firstChild);else{b3.removeAttribute("ws-children-template");_.PrepareTemplate(bN,{$:1,$0:b6},function(){return r.ChildrenArray(b3);});while(b3.hasChildNodes()){b7=b3.removeChild(b3.lastChild);}}}else _.PrepareSingleTemplate(bN,{$:1,$0:b5},b3);}}function b2(b3,b4){return bY(1,b3,b4);}bQ=function(b3){var b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci;function b4(cj){var ck;ck=b3.getAttribute(cj);ck===null?void 0:b3.setAttribute(cj,ck.toLowerCase());}b5=b3.attributes;b6=[];b7=[];b8=[];for(b9=0,b_=b5.length-1;b9<=b_;b9++){b$=b5.item(b9);(((ca=b$.nodeName,bv.StartsWith(ca,"ws-on"))?b$.nodeName!=="ws-onafterrender":false)?b$.nodeName!=="ws-on":false)?(cb=b6.push(b$.nodeName),cc=b7.push(bM.string(b$.nodeName,{$:1,$0:"ws-on".length},null)+":"+b$.nodeValue.toLowerCase())):(!(cd=b$.nodeName,bv.StartsWith(cd,"ws-"))?(ce=_9.TextHoleRE(),new a.RegExp(ce)).test(b$.nodeValue):false)?(b$.nodeValue=(cf=(cg=_9.TextHoleRE(),new a.RegExp(cg,"g")),(ch=b$.nodeValue,cf[a.Symbol.replace](ch,function(cj,ck){return"${"+ck.toLowerCase()+"}";}))),ci=b8.push(b$.nodeName)):void 0;}!(b7.length==0)?b3.setAttribute("ws-on",bv.concat(" ",b7)):void 0;!(b8.length==0)?b3.setAttribute("ws-attr-holes",bv.concat(" ",b8)):void 0;b4("ws-hole");b4("ws-replace");b4("ws-attr");b4("ws-onafterrender");b4("ws-var");bt.iter(function(cj){b3.removeAttribute(cj);},b6);};bR=function(b3){var b4,b5,b6,b7,b8,b9,b_,b$,ca;b4=null;b5=0;b8=b3.textContent;b9=(b7=_9.TextHoleRE(),new a.RegExp(b7,"g"));while(b4=b9.exec(b8),b4!==null){b_=b3.parentNode.insertBefore(a.document.createTextNode(bM.string(b8,{$:1,$0:b5},{$:1,$0:b9.lastIndex-bt.get(b4,0).length-1})),b3);b5=b9.lastIndex;b$=a.document.createElement("span");b$.setAttribute("ws-replace",bt.get(b4,1).toLowerCase());ca=b3.parentNode.insertBefore(b$,b3);}b9.lastIndex=0;b3.textContent=bM.string(b8,{$:1,$0:b5},null);};bS=function(b3,b4){function b5(b6){r.IterSelector(b3,"["+b6+"]",function(b7){var b8,b9;b8=(b9=null,[b4.TryGetValue(b7.getAttribute(b6).toLowerCase(),{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);b8[0]?b7.setAttribute(b6,b8[1]):void 0;});}b5("ws-hole");b5("ws-replace");b5("ws-attr");b5("ws-onafterrender");b5("ws-var");r.IterSelector(b3,"[ws-on]",function(b6){var b7,b8,b9;b6.setAttribute("ws-on",(b7=(b8=function(b_){var b$,ca,cb,cc;b$=bv.SplitChars(b_,[58],1);ca=(cb=null,[b4.TryGetValue(bt.get(b$,1),{get:function(){return cb;},set:function(cd){cb=cd;}}),cb]);return ca[0]?(cc=ca[1],bt.get(b$,0)+":"+cc):b_;},function(b_){return bt.map(b8,b_);}((b9=b6.getAttribute("ws-on"),bv.SplitChars(b9,[32],1)))),bv.concat(" ",b7)));});return r.IterSelector(b3,"[ws-attr-holes]",function(b6){var b7,b8,b9,b_;b8=(b7=b6.getAttribute("ws-attr-holes"),bv.SplitChars(b7,[32],1));for(b9=0,b_=b8.length-1;b9<=b_;b9++)(function(){var b$,ca,cb;b$=bt.get(b8,b9);return b6.setAttribute(b$,(ca=b6.getAttribute(b$),((cb=function(cc,cd){var ce,cf,cg,ch;ce=bH.KeyValue(cd);cf=ce[1];cg=ce[0];ch=new a.RegExp("\\${"+cg+"}","ig");return ch[a.Symbol.replace](cc,"${"+cf+"}");},(bB.Curried3(bz.fold))(cb))(ca))(b4)));}());});};bT=function(b3,b4){var b5,b6,b7,b8,b9;bQ(b4);b5=b4.nodeName.toLowerCase();b6=b3.querySelector("[ws-attr="+b5+"]");if(bC.Equals(b6,null))return a.console.warn.apply(a.console,["Filling non-existent attr hole"].concat([b5]));else{b6.removeAttribute("ws-attr");for(b7=0,b8=b4.attributes.length-1;b7<=b8;b7++){b9=b4.attributes.item(b7);(b9.name==="class"?b6.hasAttribute("class"):false)?b6.setAttribute("class",b6.getAttribute("class")+" "+b9.nodeValue):b6.setAttribute(b9.name,b9.nodeValue);}return;}};bU=function(b3,b4){function b5(b6){r.IterSelector(b3,"["+b6+"]",function(b7){if(!b4.Contains(b7.getAttribute(b6)))b7.removeAttribute(b6);});}b5("ws-attr");b5("ws-onafterrender");b5("ws-var");r.IterSelector(b3,"[ws-hole]",function(b6){var b7;if(!b4.Contains(b6.getAttribute("ws-hole"))){b6.removeAttribute("ws-hole");while(b6.hasChildNodes()){b7=b6.removeChild(b6.lastChild);}}});r.IterSelector(b3,"[ws-replace]",function(b6){var b7;if(!b4.Contains(b6.getAttribute("ws-replace"))){b7=b6.parentNode.removeChild(b6);}});r.IterSelector(b3,"[ws-on]",function(b6){var b7,b8,b9;b6.setAttribute("ws-on",(b7=(b8=function(b_){var b$;b$=bv.SplitChars(b_,[58],1);return b4.Contains(bt.get(b$,1));},function(b_){return bt.filter(b8,b_);}((b9=b6.getAttribute("ws-on"),bv.SplitChars(b9,[32],1)))),bv.concat(" ",b7)));});return r.IterSelector(b3,"[ws-attr-holes]",function(b6){var b7,b8,b9,b_,b$,ca,cb,cc;b8=(b7=b6.getAttribute("ws-attr-holes"),bv.SplitChars(b7,[32],1));for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=bt.get(b8,b9);b6.setAttribute(b$,(ca=(cb=_9.TextHoleRE(),new a.RegExp(cb,"g")),(cc=b6.getAttribute(b$),ca[a.Symbol.replace](cc,function(cd,ce){return b4.Contains(ce)?cd:"";}))));}});};bV=function(b3,b4){var b5,b6;b5=b3.querySelector("[ws-replace]");return bC.Equals(b5,null)?(a.console.warn.apply(a.console,["Filling non-existent text hole"].concat([bO])),null):(b6=b5.parentNode.replaceChild(new a.Text(b4),b5),{$:1,$0:b5.getAttribute("ws-replace")});};bW=function(b3,b4,b5){while(true)if(b3.hasChildNodes())b5=b4.insertBefore(b3.lastChild,b5);else return null;};bX=_.FakeRoot(bP);_9.LoadedTemplates().set_Item(_.ComposeName(bN,bO),bX);bt.length(bP)>0?b2(bX,bt.get(bP,0)):void 0;};_.ComposeName=function(bN,bO){return(bN+"/"+bH.DefaultArg(bO,"")).toLowerCase();};_.PrepareSingleTemplate=function(bN,bO,bP){var bQ,bR,bS,bT;bP.removeAttribute("ws-template");bQ=bP.getAttribute("ws-replace");bQ===null?void 0:(bP.removeAttribute("ws-replace"),bR=bP.parentNode,bC.Equals(bR,null)?void 0:(bS=a.document.createElement(bP.tagName),bS.setAttribute("ws-replace",bQ),bT=bR.replaceChild(bS,bP)));_.PrepareTemplateStrict(bN,bO,[bP]);};_.FakeRoot=function(bN){var bO,bP,bQ,bR;bO=a.document.createElement("div");for(bP=0,bQ=bN.length-1;bP<=bQ;bP++){bR=bO.appendChild(bt.get(bN,bP));}return bO;};_.ChildrenTemplate=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4;bY=[];bZ=[];b0=[];b1=[];b2=new bK.New$5();b3=bu.Get(bO);try{while(b3.MoveNext()){b4=b3.Current();b2.set_Item(b4.$0,b4);}}finally{if("Dispose"in b3)b3.Dispose();}bP=r.ChildrenArray(bN);bQ=function(b5,b6){var b7,b8,b9,b_;b7=Z.Insert(b5,b6);b8=bZ.push(Z.Updates(b7));b9=b0.push([b5,b7]);b_=function(b$){var ca;ca=b1.push(function(){b$(b5);});};return function(b$){if(b$==null);else b_(b$.$0);}(bB.GetOptional(b7.OnAfterRender));};bR=function(b5){var b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci;b6=(b7=null,[b2.TryGetValue(b5,{get:function(){return b7;},set:function(cj){b7=cj;}}),b7]);return b6[0]?b6[1].$==0?{$:1,$0:b6[1].$1}:b6[1].$==1?(b8=b6[1].$1,{$:1,$0:_.TextNode(b8)}):b6[1].$==2?(b9=b6[1].$1,{$:1,$0:_.TextView(b9)}):b6[1].$==6?(b_=b6[1].$1,{$:1,$0:_.TextView(b_.RView())}):b6[1].$==7?(b$=b6[1].$1,{$:1,$0:_.TextView((ca=b$.RView(),y.Map(a.String,ca)))}):b6[1].$==8?(cb=b6[1].$1,{$:1,$0:_.TextView((cc=cb.RView(),y.Map(function(cj){return cj.get_Input();},cc)))}):b6[1].$==9?(cd=b6[1].$1,{$:1,$0:_.TextView((ce=cd.RView(),y.Map(a.String,ce)))}):b6[1].$==10?(cf=b6[1].$1,{$:1,$0:_.TextView((cg=cf.RView(),y.Map(function(cj){return cj.get_Input();},cg)))}):b6[1].$==11?(ch=b6[1].$1,{$:1,$0:_.TextView((ci=ch.RView(),y.Map(a.String,ci)))}):(a.console.warn.apply(a.console,["Content hole filled with attribute data"].concat([b5])),null):null;};r.IterSelector(bN,"[ws-hole]",function(b5){var b6,b7,b8,b9,b_,b$;b_=b5.getAttribute("ws-hole");b5.removeAttribute("ws-hole");while(b5.hasChildNodes()){b$=b5.removeChild(b5.lastChild);}b6=bR(b_);(b6!=null?b6.$==1:false)?(b7=b6.$0,_9.LinkElement(b5,b7.docNode),b8=bY.push(_4.New(Z.Empty(b5),b7.docNode,null,b5,h.Int(),null)),b9=bZ.push(b7.updates)):void 0;});r.IterSelector(bN,"[ws-replace]",function(b5){var b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce;b6=b5.getAttribute("ws-replace");b7=bR(b6);(b7!=null?b7.$==1:false)?(b8=b7.$0,b9=b5.parentNode,b_=a.document.createTextNode(""),b$=b9.replaceChild(b_,b5),ca=_9.InsertBeforeDelim(b_,b8.docNode),cb=function(cf){bt.set(bP,cf,b8.docNode);},function(cf){if(cf==null);else cb(cf.$0);}((cc=function(cf){return b5===cf;},function(cf){return bt.tryFindIndex(cc,cf);}(bP))),cd=bY.push(_4.New(Z.Empty(b9),b8.docNode,{$:1,$0:[ca,b_]},b9,h.Int(),null)),ce=bZ.push(b8.updates)):void 0;});r.IterSelector(bN,"[ws-attr]",function(b5){var b6,b7,b8;b6=b5.getAttribute("ws-attr");b5.removeAttribute("ws-attr");b7=(b8=null,[b2.TryGetValue(b6,{get:function(){return b8;},set:function(b9){b8=b9;}}),b8]);b7[0]?b7[1].$==3?bQ(b5,b7[1].$1):a.console.warn.apply(a.console,["Attribute hole filled with non-attribute data"].concat([b6])):void 0;});r.IterSelector(bN,"[ws-on]",function(b5){var b6,b7;bQ(b5,V.Concat((b6=function(b8){var b9,b_,b$,ca,cb,cc;b9=bv.SplitChars(b8,[58],1);b_=(b$=null,[b2.TryGetValue(bt.get(b9,1),{get:function(){return b$;},set:function(cd){b$=cd;}}),b$]);return b_[0]?b_[1].$==4?(ca=b_[1].$1,{$:1,$0:_1.Handler(bt.get(b9,0),ca)}):(cb="Event hole on"+bt.get(b9,0)+" filled with non-event data",cc=[bt.get(b9,1)],a.console.warn.apply(a.console,[cb].concat(cc)),null):null;},function(b8){return bt.choose(b6,b8);}((b7=b5.getAttribute("ws-on"),bv.SplitChars(b7,[32],1))))));b5.removeAttribute("ws-on");});r.IterSelector(bN,"[ws-onafterrender]",function(b5){var b6,b7,b8,b9;b6=b5.getAttribute("ws-onafterrender");b7=(b8=null,[b2.TryGetValue(b6,{get:function(){return b8;},set:function(b_){b8=b_;}}),b8]);b7[0]?b7[1].$==5?(b9=b7[1].$1,b5.removeAttribute("ws-onafterrender"),bQ(b5,_1.OnAfterRender(b9))):a.console.warn.apply(a.console,["onafterrender hole filled with non-onafterrender data"].concat([b6])):void 0;});r.IterSelector(bN,"[ws-var]",function(b5){var b6,b7,b8,b9,b_,b$,ca,cb,cc;b6=b5.getAttribute("ws-var");b5.removeAttribute("ws-var");b7=(b8=null,[b2.TryGetValue(b6,{get:function(){return b8;},set:function(cd){b8=cd;}}),b8]);b7[0]?b7[1].$==6?(b9=b7[1].$1,bQ(b5,_1.Value(b9))):b7[1].$==7?(b_=b7[1].$1,bQ(b5,_1.Checked(b_))):b7[1].$==8?(b$=b7[1].$1,bQ(b5,_1.IntValue(b$))):b7[1].$==9?(ca=b7[1].$1,bQ(b5,_1.IntValueUnchecked(ca))):b7[1].$==10?(cb=b7[1].$1,bQ(b5,_1.FloatValue(cb))):b7[1].$==11?(cc=b7[1].$1,bQ(b5,_1.FloatValueUnchecked(cc))):a.console.warn.apply(a.console,["Var hole filled with non-Var data"].concat([b6])):void 0;});r.IterSelector(bN,"[ws-attr-holes]",function(b5){var b6,b7,b8,b9,b_,b$;b8=(b6=_9.TextHoleRE(),new a.RegExp(b6,"g"));b9=(b7=b5.getAttribute("ws-attr-holes"),bv.SplitChars(b7,[32],1));b5.removeAttribute("ws-attr-holes");for(b_=0,b$=b9.length-1;b_<=b$;b_++)(function(){var ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;cu=bt.get(b9,b_);cv=b5.getAttribute(cu);ca=null;cb=0;cw=[];while(ca=b8.exec(cv),ca!==null){cx=bM.string(cv,{$:1,$0:cb},{$:1,$0:b8.lastIndex-bt.get(ca,0).length-1});cb=b8.lastIndex;cy=cw.push([cx,bt.get(ca,1)]);}cd=bM.string(cv,{$:1,$0:cb},null);b8.lastIndex=0;ce=bt.foldBack(function(cz,cA){return(function(cB){var cC,cD;cC=cB[0];cD=cB[1];return function(cE){var cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV;cF=cE[0];cG=cE[1];cH=(cI=(cJ=null,[b2.TryGetValue(cD,{get:function(){return cJ;},set:function(cW){cJ=cW;}}),cJ]),cI[0]?cI[1].$==1?{$:0,$0:cI[1].$1}:cI[1].$==2?{$:1,$0:cI[1].$1}:cI[1].$==6?{$:1,$0:cI[1].$1.RView()}:cI[1].$==7?(cK=cI[1].$1,{$:1,$0:(cL=cK.RView(),y.Map(a.String,cL))}):cI[1].$==8?(cM=cI[1].$1,{$:1,$0:(cN=cM.RView(),y.Map(function(cW){return cW.get_Input();},cN))}):cI[1].$==9?(cO=cI[1].$1,{$:1,$0:(cP=cO.RView(),y.Map(a.String,cP))}):cI[1].$==10?(cQ=cI[1].$1,{$:1,$0:(cR=cQ.RView(),y.Map(function(cW){return cW.get_Input();},cR))}):cI[1].$==11?(cS=cI[1].$1,{$:1,$0:(cT=cS.RView(),y.Map(a.String,cT))}):(a.console.warn.apply(a.console,["Attribute value hole filled with non-text data"].concat([cD])),{$:0,$0:""}):{$:0,$0:""});return cH.$==1?(cU=cH.$0,cV=cF===""?cU:y.Map(function(cW){return cW+cF;},cU),[cC,new bs.T({$:1,$0:cV,$1:cG})]):[cC+cH.$0+cF,cG];};}(cz))(cA);},cw,[cd,bs.T.Empty]);return bQ(b5,ce[1].$==1?ce[1].$1.$==1?ce[1].$1.$1.$==1?ce[1].$1.$1.$1.$==0?(cf=ce[0],cg=ce[1].$0,ch=ce[1].$1.$0,ci=ce[1].$1.$1.$0,_1.Dynamic(cu,y.Map3(function(cz,cA,cB){return cf+cz+cA+cB;},cg,ch,ci))):(cj=ce[0],ck=ce[1],cl=(cm=function(cz){return cj+bv.concat("",cz);},function(cz){return y.Map(cm,cz);}(y.Sequence(ck))),_1.Dynamic(cu,cl)):(cn=ce[0],co=ce[1].$0,cp=ce[1].$1.$0,_1.Dynamic(cu,y.Map2(function(cz,cA){return cn+cz+cA;},co,cp))):ce[0]===""?(cq=ce[1].$0,_1.Dynamic(cu,cq)):(cr=ce[0],cs=ce[1].$0,_1.Dynamic(cu,y.Map(function(cz){return cr+cz;},cs))):(ct=ce[0],V.Create(cu,ct)));}());});bS=(bT=b1.length==0?null:{$:1,$0:function(b5){bt.iter(function(b6){b6(b5);},b1);}},bB.DeleteEmptyFields({Els:bP,Dirty:true,Holes:bY,Attrs:b0,Render:bT?bT.$0:void 0},["Render"]));bU=(bV=y.Const(),function(b5){return e.TreeReduce(bV,y.Map2Unit,b5);}(bZ));return((bP?bt.length(bP)===1:false)?bt.get(bP,0)instanceof a.Node?(bX=bt.get(bP,0),bC.Equals(bX.nodeType,a.Node.ELEMENT_NODE))?(bW=bt.get(bP,0),true):false:false:false)?$.TreeNode(bS,bU):_.Mk({$:6,$0:bS},bU);};_.Template=function(bN,bO){var bP;bP=_.FakeRoot(bN);return _.ChildrenTemplate(bP,bO);};_.TextView=function(bN){var bO,bP,bQ;bO=_9.CreateTextNode();bP={$:4,$0:bO};return function(bR){return _.Mk(bP,bR);}((bQ=function(bR){_9.UpdateTextNode(bO,bR);},function(bR){return y.Map(bQ,bR);}(bN)));};_.RunReplaceById=function(bN,bO){var bP;bP=r.Doc().getElementById(bN);bC.Equals(bP,null)?bH.FailWith("invalid id: "+bN):bO.ReplaceInDom(bP);};_.RunById=function(bN,bO){var bP;bP=r.Doc().getElementById(bN);bC.Equals(bP,null)?bH.FailWith("invalid id: "+bN):_.Run(bP,bO);};_.Run=function(bN,bO){var bP,bQ,bR,bS;bP=bO.docNode;_9.LinkElement(bN,bP);bQ=_9.CreateRunState(bN,bP);bR=m.StartProcessor(_9.PerformAnimatedUpdate(bQ,bP));bS=bO.updates;y.Sink(bR,bS);};_.RunPrependById=function(bN,bO){var bP;bP=r.Doc().getElementById(bN);bC.Equals(bP,null)?bH.FailWith("invalid id: "+bN):_.RunPrepend(bP,bO);};_.RunPrepend=function(bN,bO){var bP,bQ;bP=a.document.createTextNode("");bQ=bN.insertBefore(bP,bN.firstChild);_.RunBefore(bP,bO);};_.RunAppendById=function(bN,bO){var bP;bP=r.Doc().getElementById(bN);bC.Equals(bP,null)?bH.FailWith("invalid id: "+bN):_.RunAppend(bP,bO);};_.RunAppend=function(bN,bO){var bP,bQ;bP=a.document.createTextNode("");bQ=bN.appendChild(bP);_.RunBefore(bP,bO);};_.RunAfterById=function(bN,bO){var bP;bP=r.Doc().getElementById(bN);bC.Equals(bP,null)?bH.FailWith("invalid id: "+bN):_.RunAfter(bP,bO);};_.RunAfter=function(bN,bO){var bP,bQ;bP=a.document.createTextNode("");bQ=bN.parentNode.insertBefore(bP,bN.nextSibling);_.RunBetween(bN,bP,bO);};_.RunBeforeById=function(bN,bO){var bP;bP=r.Doc().getElementById(bN);bC.Equals(bP,null)?bH.FailWith("invalid id: "+bN):_.RunBefore(bP,bO);};_.RunBefore=function(bN,bO){var bP,bQ;bP=a.document.createTextNode("");bQ=bN.parentNode.insertBefore(bP,bN);_.RunBetween(bP,bN,bO);};_.RunBetween=function(bN,bO,bP){var bQ,bR,bS;_9.LinkPrevElement(bO,bP.docNode);bQ=_9.CreateDelimitedRunState(bN,bO,bP.docNode);bR=m.StartProcessor(_9.PerformAnimatedUpdate(bQ,bP.docNode));bS=bP.updates;y.Sink(bR,bS);};_.Async=function(bN){var bO;return _.EmbedView((bO=a.id,function(bP){return y.MapAsync(bO,bP);}(y.Const(bN))));};_.BindView=function(bN,bO){return _.EmbedView(y.Map(bN,bO));};_.EmbedView=function(bN){var bO,bP,bQ,bR;bO=_9.CreateEmbedNode();bP={$:2,$0:bO};return function(bS){return _.Mk(bP,bS);}((bQ=function(){},function(bS){return y.Map(bQ,bS);}((bR=function(bS){_9.UpdateEmbedNode(bO,bS.docNode);return bS.updates;},function(bS){return y.Bind(bR,bS);}(bN)))));};_.Static=function(bN){var bO,bP;bO=Z.EmptyAttr();bP=_.Empty();return $.New(bN,bO,bP);};_.Mk=function(bN,bO){return new _.New(bN,bO);};_.New=bB.Ctor(function(bN,bO){this.docNode=bN;this.updates=bO;},_);$=d.Elt=bB.Class({AddClass:function(bN){return this.elt.className+=" "+bN;},SetStyle:function(bN,bO){this.elt.style[bN]=bO;},HasClass:function(bN){return(new a.RegExp("(\\s|^)"+bN+"(\\s|$)")).test(this.elt.className);},RemoveClass:function(bN){this.elt.className=this.elt.className.replace(new a.RegExp("(?:(\\s|^)"+bN+")+(\\s|$)","g"),"$1");},GetProperty:function(bN){return this.elt[bN];},SetProperty:function(bN,bO){this.elt[bN]=bO;},RemoveAttribute:function(bN){this.elt.removeAttribute(bN);},HasAttribute:function(bN){return this.elt.hasAttribute(bN);},GetAttribute:function(bN){return this.elt.getAttribute(bN);},SetAttribute:function(bN,bO){this.elt.setAttribute(bN,bO);},SetText:function(bN){var bO,bP,bQ,bR,bS;bO=this.docNode$1;bO.$==1?(bP=bO.$0,bP.Children=_3.EmptyDoc):bO.$==6?(bQ=bO.$0,bQ.Els=[],bQ.Holes=[]):bH.FailWith("Invalid docNode in Elt");bR=this.rvUpdates;bS=y.Const();x.Set(bR,bS);this.elt.textContent=bN;},GetText:function(){return this.elt.textContent;},SetValue:function(bN){this.elt.value=bN;},GetValue:function(){return this.elt.value;},Id:function(){return this.elt.id;},Html:function(){return this.elt.outerHTML;},Clear:function(){var bN,bO,bP,bQ,bR,bS;bN=this.docNode$1;bN.$==1?(bO=bN.$0,bO.Children=_3.EmptyDoc):bN.$==6?(bP=bN.$0,(bP.Els=[],bP.Holes=[])):bH.FailWith("Invalid docNode in Elt");bQ=this.rvUpdates;bR=y.Const();x.Set(bQ,bR);while(this.elt.hasChildNodes()){bS=this.elt.removeChild(this.elt.firstChild);}},Prepend:function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1;bO=this.docNode$1;bO.$==1?(bP=bO.$0,bP.Children={$:0,$0:bN.docNode,$1:bP.Children},bQ=(bR=this.elt.firstChild,bC.Equals(bR,null)?null:bR),bS=_9.InsertDoc(this.elt,bN.docNode,bQ)):bO.$==6?(bT=bO.$0,bU=this.elt.insertBefore(a.document.createTextNode(""),this.elt.firstChild),bV=_9.InsertBeforeDelim(bU,bN.docNode),bW=bT.Holes.push((bX=this.elt,_4.New(Z.Empty(this.elt),bN.docNode,{$:1,$0:[bV,bU]},bX,h.Int(),null)))):bH.FailWith("Invalid docNode in Elt");bY=this.rvUpdates;bZ=(b0=this.rvUpdates.c,(b1=bN.updates,y.Map2Unit(b0,b1)));x.Set(bY,bZ);},Append:function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;bO=this.docNode$1;bO.$==1?(bP=bO.$0,bP.Children={$:0,$0:bP.Children,$1:bN.docNode},bQ=_9.InsertDoc(this.elt,bN.docNode,null)):bO.$==6?(bR=bO.$0,bS=this.elt.appendChild(a.document.createTextNode("")),bT=_9.InsertBeforeDelim(bS,bN.docNode),bU=bR.Holes.push((bV=this.elt,_4.New(Z.Empty(this.elt),bN.docNode,{$:1,$0:[bT,bS]},bV,h.Int(),null)))):bH.FailWith("Invalid docNode in Elt");bW=this.rvUpdates;bX=(bY=this.rvUpdates.c,(bZ=bN.updates,y.Map2Unit(bY,bZ)));x.Set(bW,bX);},ToUpdater:function(){var bN,bO,bP,bQ,bR;bN=(bO=this.docNode$1,bO.$==1?(bP=bO.$0,(bQ=[this.elt],bB.DeleteEmptyFields({Els:bQ,Dirty:true,Holes:[bP],Attrs:[],Render:(bR=null,bR?bR.$0:void 0)},["Render"]))):bO.$==6?bO.$0:bH.FailWith("Invalid docNode in Elt"));return new ba.New(bN,this.updates$1,this.elt,this.rvUpdates,x.Create$1([]));},OnAfterRenderView:function(bN,bO){var bP,bQ;bP=this;bQ=h.Id();this.Append(_.BindView(function(bR){bP.elt[bQ]=bR;return _.Empty();},bN));return this.OnAfterRender(function(bR){bO(bR,bR[bQ]);});},OnAfterRender:function(bN){var bO,bP,bQ,bR,bS,bT,bU;bO=this.docNode$1;bO.$==1?(bP=bO.$0,bB.SetOptional(bP,"Render",(bQ=bB.GetOptional(bP.Render),(bQ!=null?bQ.$==1:false)?(bR=bQ.$0,{$:1,$0:function(bV){bR(bV);bN(bV);}}):{$:1,$0:bN}))):bO.$==6?(bS=bO.$0,bB.SetOptional(bS,"Render",(bT=bB.GetOptional(bS.Render),(bT!=null?bT.$==1:false)?(bU=bT.$0,{$:1,$0:function(bV){bU(bV);bN(bV);}}):{$:1,$0:bN}))):bH.FailWith("Invalid docNode in Elt");return this;},onView:function(bN,bO,bP){var bQ;bQ=bP(this.elt);this.elt.addEventListener(bN,function(bR){var bS;bS=bQ(bR);return y.Get(bS,bO);},false);return this;},on:function(bN,bO){this.elt.addEventListener(bN,function(bP){return bO(bP.target,bP);},false);return this;}},_,$);$.TreeNode=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV,bW;bP=x.Create$1(bO);bQ=(bR=(bS=(bT=function(bX){return bX[1];},function(bX){return Z.Updates(bT(bX));}),function(bX){return bt.map(bS,bX);}(bN.Attrs)),(bU=y.Const(),e.TreeReduce(bU,y.Map2Unit,bR)));bV=(bW=bP.v,y.Bind(function(bX){return y.Map2Unit(bQ,bX);},bW));return new $.New$1({$:6,$0:bN},bV,bt.get(bN.Els,0),bP);};$.New=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=_9.CreateElemNode(bN,bO,bP.docNode);bR=x.Create$1(bP.updates);bS=Z.Updates(bQ.Attr);bT=(bU=bR.v,y.Bind(function(bV){return y.Map2Unit(bS,bV);},bU));return new $.New$1({$:1,$0:bQ},bT,bN,bR);};$.New$1=bB.Ctor(function(bN,bO,bP,bQ){_.New.call(this,bN,bO);this.docNode$1=bN;this.updates$1=bO;this.elt=bP;this.rvUpdates=bQ;},$);ba=W.EltUpdater=bB.Class({RemoveAllUpdated:function(){var bN;this.treeNode.Holes=[];bN=this.holeUpdates;x.Set(bN,[]);},RemoveUpdated:function(bN){var bO,bP,bQ,bR,bS,bT,bU;bO=bN.docNode;bO.$==1?(bP=bO.$0,bQ=bP.ElKey,this.treeNode.Holes=(bR=function(bV){return bV.ElKey!==bQ;},function(bV){return bt.filter(bR,bV);}(this.treeNode.Holes)),bS=this.holeUpdates,bT=(bU=function(bV){return bV===bQ?false:true;},function(bV){return bt.filter(function(bW){return bU(bW[0]);},bV);}(this.holeUpdates.c)),x.Set(bS,bT)):bH.FailWith("DocUpdater.RemoveUpdated expects a single element node");},AddUpdated:function(bN){var bO,bP,bQ,bR,bS,bT;bO=bN.docNode;bO.$==1?(bP=bO.$0,bQ=this.treeNode.Holes.push(bP),bR=this.holeUpdates.c,bS=bR.push([bP.ElKey,bN.updates]),bT=this.holeUpdates,x.Set(bT,bR)):bH.FailWith("DocUpdater.AddUpdated expects a single element node");}},$,ba);ba.New=bB.Ctor(function(bN,bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX,bY;$.New$1.call(this,{$:6,$0:bN},(bS=(bT=bR.v,(bU=(bV=(bW=function(bZ){return bZ[1];},function(bZ){return bt.map(bW,bZ);}),(bX=(bY=y.Const(),function(bZ){return e.TreeReduce(bY,y.Map2Unit,bZ);}),function(bZ){return bX(bV(bZ));})),y.BindInner(bU,bT))),y.Map2Unit(bO,bS)),bP,bQ);this.treeNode=bN;this.holeUpdates=bR;},ba);bb.$cctor=bB.Cctor(function(){bb.LoadedTemplates=new bK.New$5();bb.TextHoleRE="\\${([^}]+)}";bb.$cctor=a.ignore;});bc=d.Flow=bB.Class({get_Render:function(){return this.render;}},null,bc);bc.New=bB.Ctor(function(bN){bc.New$1.call(this,function(bO){return function(bP){var bQ;bQ=bN(bP);return x.Set(bO,bQ);};});},bc);bc.New$1=bB.Ctor(function(bN){this.render=bN;},bc);bc.get_Do=function(){return new bd.New();};bc.Static=function(bN){return new bc.New$1(function(bO){return function(bP){x.Set(bO,bN);return bP();};});};bc.Define=function(bN){return new bc.New(function(bO){return bN(function(bP){bO(bP);});});};bc.Embed=function(bN){var bO;bO=x.Create$1(_.Empty());((bN.get_Render())(bO))(function(bP){});return _.EmbedView(bO.v);};bc.Return=function(bN){return new bc.New$1(function(){return function(bO){return bO(bN);};});};bc.Bind=function(bN,bO){return new bc.New$1(function(bP){return function(bQ){return((bN.get_Render())(bP))(function(bR){((bO(bR).get_Render())(bP))(bQ);});};});};bc.Map=function(bN,bO){return new bc.New$1(function(bP){return function(bQ){return((bO.get_Render())(bP))(function(bR){bQ(bN(bR));});};});};bd=d.FlowBuilder=bB.Class({ReturnFrom:a.id,Return:function(bN){return bc.Return(bN);},Bind:function(bN,bO){return bc.Bind(bN,bO);}},null,bd);bd.New=bB.Ctor(function(){},bd);bf=be.attr=bB.Class({},null,bf);bf.New=bB.Ctor(function(){},bf);bg.Append=function(bN,bO){var bP,bQ,bR,bS;bP=bN.$1;bQ=bN.$0;bR=bO.$1;bS=bO.$0;return{$:0,$0:p.Append(bQ,bS),$1:bE.FoldBack(function(bT,bU,bV){return bV.Add(bT,bU);},bP,bR)};};bg.FromList=function(bN,bO){return{$:0,$0:p.FromArray(bt.ofList(bN)),$1:bO};};bg.ToList=function(bN){var bO,bP;bO=bN.$0;bP=bN.$1;return[bs.ofArray(p.ToArray(bO)),bP];};bg.SameHash=function(bN,bO){return bg.NoHash(bN)===bg.NoHash(bO);};bg.MakeHash=function(bN){var bO,bP,bQ,bR,bS,bT,bU;bO=bN.$1;bP=bN.$0;bQ=(bR=(bS=p.ToArray(bP),bt.map(function(bV){return a.encodeURIComponent(bV);},bS)),bv.concat("/",bR));return bO.get_IsEmpty()?bQ:bQ+"?"+(bT=(bU=function(bV){var bW,bX,bY;bW=bH.KeyValue(bV);bX=bW[1];bY=bW[0];return a.encodeURIComponent(bY)+"="+a.encodeURIComponent(bX);},function(bV){return bz.map(bU,bV);}(bO)),bv.concat("&",bT));};bg.ParseHash=function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV;bO=bg.NoHash(bN);bP=(bQ=bO.indexOf(a.String.fromCharCode(63)),bQ===-1?[bO,""]:[bM.string(bO,null,{$:1,$0:bQ-1}),bM.string(bO,{$:1,$0:bQ+1},null)]);bR=bP[1];bS=bP[0];bT=p.FromArray(bS===""?[]:(bU=bv.SplitChars(bS,[47],0),bt.map(function(bW){return a.decodeURIComponent(bW);},bU)));return{$:0,$0:bT,$1:bE.OfArray((bV=function(bW){var bX,bY,bZ;bX=bW.indexOf(a.String.fromCharCode(61));return bX===-1?[a.decodeURIComponent(bW),""]:[(bY=bM.string(bW,null,{$:1,$0:bX-1}),a.decodeURIComponent(bY)),(bZ=bM.string(bW,{$:1,$0:bX+1},null),a.decodeURIComponent(bZ))];},function(bW){return bt.map(bV,bW);}(bv.SplitChars(bR,[38],0))))};};bg.NoHash=function(bN){return bv.StartsWith(bN,"#")?bN.substring(1):bN;};bi.New=function(bN,bO,bP,bQ){return{Bodies:bN,CurrentRoute:bO,CurrentSite:bP,Selection:bQ};};bh.Install=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0;function b1(b2){var b3,b4,b5,b6;b3=bV(b2);b3.$==1?void 0:(b4=b3.$0,b5=b3.$1,b6=bg.FromList(b5,new bF.New([])),bh.OnGlobalRouteChange(bS,b4,b6));}bP=bO.$0;bQ=bO.$1;bR=bh.InstallMap({Des:function(b2){var b3,b4;b3=b2[0];b4=b2[1];return bg.FromList(b3,b4);},Ser:bg.ToList});bS=bi.New(void 0,bR,0,void 0);bT=(bU=function(b2,b3){var b4,b5;b4=b3.$1;b5=b3.$0;return b4({UpdateRoute:function(b6){bh.OnInternalSiteUpdate(bS,b5,b2,b6);}});},function(b2){return t.Map(function(b3){return function(b4){return bU(b3,b4);};},b2);}(bQ));bS.Bodies=bh.ComputeBodies(bT);bV=function(b2){var b3,b4;b3=bg.ToList(b2);b4=b3[0];return t.Lookup(bT,b4);};bW=(bX=bV(bR.c),bX.$==0?(bY=bX.$0,(bS.CurrentSite=bY.RouteId,x.Create$1(bY.RouteValue))):x.Create$1((bP!=null?bP.$==1:false)?bP.$0:bH.FailWith("Site.Install fails on empty site")));bS.Selection=bW;bZ=function(b2){bh.OnSelectSite(bS,bN(b2));};(function(b2){y.Sink(bZ,b2);}(bW.v));b1(bR.c);b0=bR.v;y.Sink(b1,b0);return bW;};bh.OnSelectSite=function(bN,bO){var bP;bP=bO.$0;bN.CurrentSite!==bP?(bN.CurrentSite=bP,bN.Bodies.get_Item(bP).OnSelect()):void 0;};bh.OnInternalSiteUpdate=function(bN,bO,bP,bQ){var bR;if(bN.CurrentSite===bO){bR=bg.Append(bg.FromList(bP,new bF.New([])),bQ);bh.SetCurrentRoute(bN,bR);}};bh.OnGlobalRouteChange=function(bN,bO,bP){var bQ,bR;bN.CurrentSite!==bO.RouteId?(bN.CurrentSite=bO.RouteId,bQ=bN.Selection,bR=bO.RouteValue,x.Set(bQ,bR)):void 0;bO.OnRouteChanged(bP);};bh.SetCurrentRoute=function(bN,bO){var bP;if(!bC.Equals(bN.CurrentRoute.c,bO)){bP=bN.CurrentRoute;x.Set(bP,bO);}};bh.ComputeBodies=function(bN){var bO,bP;bO=new bK.New$5();bP=function(bQ){bO.set_Item(bQ.RouteId,bQ);};(function(bQ){bt.iter(bP,bQ);}(t.ToArray(bN)));return bO;};bh.MergeRouters=function(bN){var bO,bP,bQ,bR,bS;bO=e.ofSeqNonCopying(bN);bP=t.Merge((bQ=function(bT){return bT.$1;},function(bT){return bz.map(bQ,bT);}(bO)));bR=(bS=function(bT){return bT.$0;},function(bT){return bz.tryPick(bS,bT);}(bO));return(bP!=null?bP.$==1:false)?{$:0,$0:bR,$1:bP.$0}:bH.FailWith("Invalid Site.Merge: need more prefix disambiguation");};bh.DefineRoute=function(bN,bO,bP){var bQ,bR,bS;bQ=x.Create$1(bO);bR=h.Int();bS=bP({$:0,$0:bR},bQ);return{$:0,$0:{$:1,$0:bS},$1:t.Leaf({$:0,$0:bR,$1:function(bT){var bU;bU=function(bV){bT.UpdateRoute(bh.DoLink(bN,bV));};(function(bV){y.Sink(bU,bV);}(bQ.v));return{OnRouteChanged:function(bV){var bW;bW=bh.DoRoute(bN,bV);x.Set(bQ,bW);},OnSelect:function(){bT.UpdateRoute(bh.DoLink(bN,bQ.c));},RouteId:bR,RouteValue:bS};}})};};bh.DoLink=function(bN,bO){var bP,bQ,bR;bP=bN.Ser(bO);bQ=bP[0];bR=bP[1];return bg.FromList(bQ,bR);};bh.DoRoute=function(bN,bO){return bN.Des(bg.ToList(bO));};bh.InstallMap=function(bN){var bO,bP,bQ,bR,bS,bT;function bU(bV){return bS(bQ());}bO=a.window;bP=function(bV,bW){return bC.Equals(bN.Ser(bV),bN.Ser(bW));};bQ=function(){return bN.Des(bg.ToList(bg.ParseHash(bO.location.hash)));};bR=x.Create$1(bQ());bS=function(bV){if(!bP(bR.c,bV))x.Set(bR,bV);};bO.onpopstate=bU;bO.onhashchange=bU;bT=function(bV){var bW,bX,bY,bZ;bW=bg.MakeHash((bX=bN.Ser(bV),(bY=bX[0],(bZ=bX[1],bg.FromList(bY,bZ)))));!bg.SameHash(bO.location.hash,bW)?bO.location.replace("#"+bW):void 0;};(function(bV){y.Sink(bT,bV);}(bR.v));return bR;};bj.Install=function(bN){return bh.InstallMap(bN);};bj.Create=function(bN,bO){var bP;return{Des:(bP=function(bQ){return bQ[0];},function(bQ){return bO(bP(bQ));}),Ser:function(bQ){return[bN(bQ),new bF.New([])];}};};bj.CreateWithQuery=function(bN,bO){return{Des:bO,Ser:bN};};bk.Route=function(bN,bO,bP){return bh.DefineRoute(bN,bO,bP);};bk.Prefix=function(bN,bO){var bP,bQ;bP=bO.$0;bQ=bO.$1;return{$:0,$0:bP,$1:t.Prefix(bN,bQ)};};bk.Merge=function(bN){return bh.MergeRouters(bN);};bk.Install=function(bN,bO){return bh.Install(bN,bO);};bk.Dir=function(bN,bO){var bP;bP=bk.Merge(bO);return bk.Prefix(bN,bP);};bm.New=function(bN,bO){return{Active:bN,PosV:bO};};bn.New=function(bN,bO,bP,bQ){return{Active:bN,Left:bO,Middle:bP,Right:bQ};};bo.get_MousePressed=function(){var bN,bO,bP,bQ,bR,bS;bl.ActivateButtonListener();bN=(bO=(bP=y.Const(bB.Curried3(function(bT,bU,bV){return(bT?true:bU)?true:bV;})),(bQ=bl.MouseBtnSt$1().Left.v,y.Apply(bP,bQ))),(bR=bl.MouseBtnSt$1().Middle.v,y.Apply(bO,bR)));bS=bl.MouseBtnSt$1().Right.v;return y.Apply(bN,bS);};bo.get_RightPressed=function(){bl.ActivateButtonListener();return bl.MouseBtnSt$1().Right.v;};bo.get_MiddlePressed=function(){bl.ActivateButtonListener();return bl.MouseBtnSt$1().Middle.v;};bo.get_LeftPressed=function(){bl.ActivateButtonListener();return bl.MouseBtnSt$1().Left.v;};bo.get_Position=function(){!bl.MousePosSt$1().Active?(a.document.addEventListener("mousemove",function(bN){var bO,bP;bO=bl.MousePosSt$1().PosV;bP=[bN.clientX,bN.clientY];x.Set(bO,bP);},false),bl.MousePosSt$1().Active=true):void 0;return bl.MousePosSt$1().PosV.v;};bp.New=function(bN,bO,bP){return{KeysPressed:bN,KeyListenerActive:bO,LastPressed:bP};};bq.IsPressed=function(bN){var bO,bP;bl.ActivateKeyListener();bO=bl.KeyListenerState().KeysPressed.v;return y.Map((bP=function(bQ){return bQ===bN;},function(bQ){return bs.exists(bP,bQ);}),bO);};bq.get_LastPressed=function(){bl.ActivateKeyListener();return bl.KeyListenerState().LastPressed.v;};bq.get_KeysPressed=function(){bl.ActivateKeyListener();return bl.KeyListenerState().KeysPressed.v;};bl.ActivateKeyListener=function(){br.$cctor();return br.ActivateKeyListener;};bl.KeyListenerState=function(){br.$cctor();return br.KeyListenerState;};bl.ActivateButtonListener=function(){br.$cctor();return br.ActivateButtonListener;};bl.MouseBtnSt$1=function(){br.$cctor();return br.MouseBtnSt;};bl.MousePosSt$1=function(){br.$cctor();return br.MousePosSt;};br.$cctor=bB.Cctor(function(){var bN,bO,bP,bQ,bR,bS,bT,bU,bV;br.MousePosSt=bm.New(false,x.Create$1([0,0]));br.MouseBtnSt=bn.New(false,x.Create$1(false),x.Create$1(false),x.Create$1(false));br.ActivateButtonListener=(bN=function(bW,bX){var bY,bZ,b0,b1;bY=bW.button;return bY===0?(bZ=bl.MouseBtnSt$1().Left,x.Set(bZ,bX)):bY===1?(b0=bl.MouseBtnSt$1().Middle,x.Set(b0,bX)):bY===2?(b1=bl.MouseBtnSt$1().Right,x.Set(b1,bX)):null;},!bl.MouseBtnSt$1().Active?(bl.MouseBtnSt$1().Active=true,a.document.addEventListener("mousedown",function(bW){return bN(bW,true);},false),a.document.addEventListener("mouseup",function(bW){return bN(bW,false);},false)):null);br.KeyListenerState=bp.New(x.Create$1(bs.T.Empty),false,x.Create$1(-1));br.ActivateKeyListener=!bl.KeyListenerState().KeyListenerActive?(bO=(bP=(bQ=a.document,a.jQuery(bQ)),(bR=function(bW,bX){var bY,bZ,b0,b1,b2;bY=bX.which;bZ=bl.KeyListenerState().LastPressed;x.Set(bZ,bY);b0=bl.KeyListenerState().KeysPressed.c;return!bs.exists(function(b3){return b3===bY;},b0)?(b1=bl.KeyListenerState().KeysPressed,(b2=bs.append(b0,bs.ofArray([bY])),x.Set(b1,b2))):null;},bP.keydown(function(bW){return bR(this,bW);}))),bS=(bT=(bU=a.document,a.jQuery(bU)),(bV=function(bW,bX){var bY,bZ,b0;bY=bX.which;bZ=bl.KeyListenerState().KeysPressed;return x.Update(bZ,(b0=function(b1){return b1!==bY;},function(b1){return bs.filter(b0,b1);}));},bT.keyup(function(bW){return bV(this,bW);})))):null;br.$cctor=a.ignore;});}());
